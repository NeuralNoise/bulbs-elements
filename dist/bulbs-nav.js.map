{"version":3,"sources":["webpack:///./elements/bulbs-nav/bulbs-nav.js","webpack:///./elements/bulbs-nav/bulbs-nav.scss"],"names":["SCROLL_DISTANCE_TO_CLOSE","NavStateManager","state","requestClose","element","getAttribute","frameRequest","requestAnimationFrame","close","cancelClose","stateInfo","cancelAnimationFrame","BulbsNavToggle","createdCallback","addEventListener","openNavPanel","navPanel","open","toggleNavPanel","toggle","navName","document","querySelector","BulbsNavPanel","scrollHandler","bind","getBoundingClientRect","top","classList","contains","forEach","call","otherPanels","otherPanel","add","navToggle","tabGroup","resetSelection","window","picturefill","remove","removeEventListener","filter","parentNode","querySelectorAll","child"],"mappings":"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","file":"bulbs-nav.js","sourcesContent":["import { registerElement, BulbsHTMLElement } from 'bulbs-elements/register';\nimport './bulbs-nav.scss';\n\nconst SCROLL_DISTANCE_TO_CLOSE = -150;\n\nconst NavStateManager = {\n  state: {},\n\n  requestClose (element) {\n    this.state[element.getAttribute('nav-name')] = {\n      element,\n      frameRequest: requestAnimationFrame(() => {\n        delete this.state[element.getAttribute('nav-name')];\n        element.close();\n      }),\n    };\n  },\n\n  cancelClose (element) {\n    const stateInfo = this.state[element.getAttribute('nav-name')];\n    if (stateInfo) {\n      cancelAnimationFrame(stateInfo.frameRequest);\n      delete this.state[element.getAttribute('nav-name')];\n    }\n  },\n};\n\nclass BulbsNavToggle extends BulbsHTMLElement {\n  createdCallback () {\n    this.addEventListener('mouseenter', () => this.openNavPanel());\n    this.addEventListener('mouseleave', () => this.navPanel.requestClose());\n  }\n\n  get navPanel () {\n    const navName = this.getAttribute('nav-name');\n    return document.querySelector(`bulbs-nav-panel[nav-name='${navName}']`);\n  }\n\n  openNavPanel () {\n    NavStateManager.cancelClose(this.navPanel);\n    this.navPanel.open();\n  }\n\n  toggleNavPanel () {\n    this.navPanel.toggle();\n  }\n}\n\nclass BulbsNavPanel extends BulbsHTMLElement {\n  createdCallback () {\n    this.addEventListener('mouseleave', () => this.requestClose());\n    this.addEventListener('mouseenter', () => this.open());\n    this.scrollHandler = this.scrollHandler.bind(this);\n  }\n\n  get tabGroup () {\n    return this.querySelector('bulbs-tabs');\n  }\n\n  get navToggle () {\n    const navName = this.getAttribute('nav-name');\n    return document.querySelector(`bulbs-nav-toggle[nav-name='${navName}']`);\n  }\n\n  get otherPanels () {\n    return [].filter.call(\n      this.parentNode.querySelectorAll('bulbs-nav-panel'),\n      child => child !== this\n    );\n  }\n\n  scrollHandler () {\n    if (this.getBoundingClientRect().top < SCROLL_DISTANCE_TO_CLOSE) {\n      this.close();\n    }\n  }\n\n  requestClose () {\n    NavStateManager.requestClose(this);\n  }\n\n  open () {\n    NavStateManager.cancelClose(this);\n    if (!this.classList.contains('bulbs-nav-panel-active')) {\n      [].forEach.call(this.otherPanels, otherPanel => otherPanel.close());\n      this.classList.add('bulbs-nav-panel-active');\n      this.navToggle.classList.add('bulbs-nav-toggle-active');\n      if (this.tabGroup) {\n        this.tabGroup.resetSelection();\n      }\n      if (window.picturefill) {\n        window.picturefill();\n      }\n      window.addEventListener('scroll', this.scrollHandler);\n    }\n  }\n\n  close () {\n    this.classList.remove('bulbs-nav-panel-active');\n    this.navToggle.classList.remove('bulbs-nav-toggle-active');\n    window.removeEventListener('scroll', this.scrollHandler);\n  }\n\n  toggle () {\n    if (this.classList.contains('bulbs-nav-panel-active')) {\n      this.close();\n    }\n    else {\n      this.open();\n    }\n  }\n}\n\nregisterElement('bulbs-nav-toggle', BulbsNavToggle);\nregisterElement('bulbs-nav-panel', BulbsNavPanel);\n\n\n\n// WEBPACK FOOTER //\n// ./elements/bulbs-nav/bulbs-nav.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./elements/bulbs-nav/bulbs-nav.scss\n// module id = 269\n// module chunks = 13"],"sourceRoot":""}