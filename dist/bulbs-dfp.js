webpackJsonp([7],[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){for(var r=Object.getOwnPropertyNames(e),i=0;i<r.length;i++){var n=r[i],a=Object.getOwnPropertyDescriptor(e,n);a&&a.configurable&&void 0===t[n]&&Object.defineProperty(t,n,a)}return t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):n(t,e))}Object.defineProperty(e,"__esModule",{value:!0});var h=function(){function t(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}(),l=r(8),d=i(l),u=r(5),c=i(u),f=r(1),p=function(t){function e(){return a(this,e),o(this,t.apply(this,arguments))}return s(e,t),e.prototype.attachedCallback=function(){(0,c.default)(this.hasAttribute("viewport-threshold"),'<div is="bulbs-dfp"> MUST specify a `viewport-threshold` property. This value defines how many screens away from the viewport the slot will be in order to trigger an ad load. 1.2 = 120% viewport height.'),this.handleEnterViewport=this.handleEnterViewport.bind(this),this.handleExitViewport=this.handleExitViewport.bind(this),this.handleInterval=this.handleInterval.bind(this),this.addEventListener("enterviewport",this.handleEnterViewport),this.addEventListener("exitviewport",this.handleExitViewport);var t=parseFloat(this.getAttribute("viewport-threshold"),10);d.default.add(this,{get distanceFromTop(){return-(window.innerHeight*t)},get distanceFromBottom(){return window.innerHeight*t}});var e=3e4;this.adUnitData=this.adsManager.adUnits.units[this.dataset.adUnit],this.adUnitData.refreshDisabled||this.hasAttribute("no-refresh")||(this.refreshInterval=window.setInterval(this.handleInterval,this.adUnitData.refreshInterval||e))},e.prototype.detachedCallback=function(){d.default.remove(this),this.refreshInterval&&window.clearInterval(this.refreshInterval)},e.prototype.handleEnterViewport=function(){!this.trackedEnterViewport&&this.adsManager&&(this.trackedEnterViewport=!0,this.adsManager.asyncRefreshSlot(this))},e.prototype.handleExitViewport=function(){this.trackedExitViewport||(this.trackedExitViewport=!0)},e.prototype.handleInterval=function(){var t=document.visibilityState;this.isViewable&&"visible"===t&&(this.adsManager.reloadAds(this),this.adsManager.refreshSlot(this))},h(e,[{key:"isViewable",get:function(){return d.default.isElementInViewport(this,null,{distanceFromTop:.66*this.offsetHeight,distanceFromBottom:-(.66*this.offsetHeight)})}},{key:"adsManager",get:function(){return window.BULBS_ELEMENTS_ADS_MANAGER}}]),e}(f.BulbsHTMLElement);e.default=p,p.extends="div",(0,f.registerElement)("bulbs-dfp",p)}]);
//# sourceMappingURL=bulbs-dfp.js.map