{"version":3,"sources":["webpack:///bulbs-dfp.js","webpack:///./elements/bulbs-dfp/bulbs-dfp.js"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_defaults","defaults","keys","Object","getOwnPropertyNames","i","length","key","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","setPrototypeOf","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","_util","_util2","_invariant","_invariant2","_register","BulbsDfp","_BulbsHTMLElement","this","apply","arguments","attachedCallback","hasAttribute","getAnalyticsManager","sendEvent","eventCategory","eventAction","eventLabel","dataset","adUnit","handleEnterViewport","bind","handleExitViewport","handleInterval","handleSlotRenderEnded","handleImpressionViewable","handleSlotOnload","addEventListener","threshold","parseFloat","getAttribute","InViewMonitor","add","distanceFromTop","window","innerHeight","distanceFromBottom","defaultRefreshInterval","adUnitData","adsManager","adUnits","units","refreshDisabled","refreshInterval","setInterval","detachedCallback","remove","clearInterval","trackedEnterViewport","trackedExitViewport","browserVisibility","document","visibilityState","isViewable","reloadAds","get","isElementInViewport","offsetHeight","BULBS_ELEMENTS_ADS_MANAGER","BulbsHTMLElement","extends","registerElement"],"mappings":"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","file":"bulbs-dfp.js","sourcesContent":["webpackJsonp([6],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _util = __webpack_require__(181);\n\t\n\tvar _util2 = _interopRequireDefault(_util);\n\t\n\tvar _invariant = __webpack_require__(1);\n\t\n\tvar _invariant2 = _interopRequireDefault(_invariant);\n\t\n\tvar _register = __webpack_require__(2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar BulbsDfp = function (_BulbsHTMLElement) {\n\t  _inherits(BulbsDfp, _BulbsHTMLElement);\n\t\n\t  function BulbsDfp() {\n\t    _classCallCheck(this, BulbsDfp);\n\t\n\t    return _possibleConstructorReturn(this, _BulbsHTMLElement.apply(this, arguments));\n\t  }\n\t\n\t  BulbsDfp.prototype.attachedCallback = function attachedCallback() {\n\t\n\t    (0, _invariant2.default)(this.hasAttribute('viewport-threshold'), '<div is=\"bulbs-dfp\"> MUST specify a `viewport-threshold` property. ' + 'This value defines how many screens away from the viewport the slot ' + 'will be in order to trigger an ad load. 1.2 = 120% viewport height.');\n\t\n\t    _util2.default.getAnalyticsManager().sendEvent({\n\t      eventCategory: 'bulbs-dfp-element Metrics',\n\t      eventAction: 'attached',\n\t      eventLabel: this.dataset.adUnit\n\t    });\n\t\n\t    this.handleEnterViewport = this.handleEnterViewport.bind(this);\n\t    this.handleExitViewport = this.handleExitViewport.bind(this);\n\t    this.handleInterval = this.handleInterval.bind(this);\n\t    this.handleSlotRenderEnded = this.handleSlotRenderEnded.bind(this);\n\t    this.handleImpressionViewable = this.handleImpressionViewable.bind(this);\n\t    this.handleSlotOnload = this.handleSlotOnload.bind(this);\n\t\n\t    this.addEventListener('enterviewport', this.handleEnterViewport);\n\t    this.addEventListener('exitviewport', this.handleExitViewport);\n\t    this.addEventListener('dfpSlotRenderEnded', this.handleSlotRenderEnded);\n\t    this.addEventListener('dfpImpressionViewable', this.handleImpressionViewable);\n\t    this.addEventListener('dfpSlotOnload', this.handleSlotOnload);\n\t\n\t    var threshold = parseFloat(this.getAttribute('viewport-threshold'), 10);\n\t    _util2.default.InViewMonitor.add(this, {\n\t      get distanceFromTop() {\n\t        return window.innerHeight * threshold;\n\t      },\n\t      get distanceFromBottom() {\n\t        return -(window.innerHeight * threshold);\n\t      }\n\t    });\n\t\n\t    var defaultRefreshInterval = 30000;\n\t    this.adUnitData = this.adsManager.adUnits.units[this.dataset.adUnit];\n\t    if (!this.adUnitData.refreshDisabled) {\n\t\n\t      this.refreshInterval = window.setInterval(this.handleInterval, this.adUnitData.refreshInterval || defaultRefreshInterval);\n\t    }\n\t  };\n\t\n\t  BulbsDfp.prototype.detachedCallback = function detachedCallback() {\n\t    _util2.default.InViewMonitor.remove(this);\n\t\n\t    if (this.refreshInterval) {\n\t      window.clearInterval(this.refreshInterval);\n\t    }\n\t  };\n\t\n\t  BulbsDfp.prototype.handleEnterViewport = function handleEnterViewport() {\n\t    if (!this.trackedEnterViewport) {\n\t      this.trackedEnterViewport = true;\n\t      _util2.default.getAnalyticsManager().sendEvent({\n\t        eventCategory: 'bulbs-dfp-element Metrics',\n\t        eventAction: 'enterviewport',\n\t        eventLabel: this.dataset.adUnit\n\t      });\n\t    }\n\t    /* We are taking our time rolling out this change.\n\t     *  1) we want to make sure the page-speed implications of putting\n\t     *      bulbs-elements in the critical path for ad loading isn't too heavy\n\t     *  2) we want to look at analytics to get some idea of how often this will\n\t     *      happen.\n\t     *\n\t     * The eventual strategy will be:\n\t    this.adsManager.loadAds(this)\n\t     */\n\t  };\n\t\n\t  BulbsDfp.prototype.handleExitViewport = function handleExitViewport() {\n\t    if (!this.trackedExitViewport) {\n\t      this.trackedExitViewport = true;\n\t      _util2.default.getAnalyticsManager().sendEvent({\n\t        eventCategory: 'bulbs-dfp-element Metrics',\n\t        eventAction: 'exitviewport',\n\t        eventLabel: this.dataset.adUnit\n\t      });\n\t    }\n\t\n\t    /* We are taking our time rolling out this change.\n\t     *  1) we want to make sure the page-speed implications of putting\n\t     *      bulbs-elements in the critical path for ad loading isn't too heavy\n\t     *  2) we want to look at analytics to get some idea of how often this will\n\t     *      happen.\n\t     *\n\t     * The eventual strategy will be:\n\t    this.adsManager.unloadAds(this)\n\t     */\n\t  };\n\t\n\t  BulbsDfp.prototype.handleSlotRenderEnded = function handleSlotRenderEnded() {\n\t    _util2.default.getAnalyticsManager().sendEvent({\n\t      eventCategory: 'bulbs-dfp-element Metrics',\n\t      eventAction: 'slotrenderended',\n\t      eventLabel: this.dataset.adUnit\n\t    });\n\t  };\n\t\n\t  BulbsDfp.prototype.handleImpressionViewable = function handleImpressionViewable() {\n\t    _util2.default.getAnalyticsManager().sendEvent({\n\t      eventCategory: 'bulbs-dfp-element Metrics',\n\t      eventAction: 'impressionviewable',\n\t      eventLabel: this.dataset.adUnit\n\t    });\n\t  };\n\t\n\t  BulbsDfp.prototype.handleSlotOnload = function handleSlotOnload() {\n\t    _util2.default.getAnalyticsManager().sendEvent({\n\t      eventCategory: 'bulbs-dfp-element Metrics',\n\t      eventAction: 'slotonload',\n\t      eventLabel: this.dataset.adUnit\n\t    });\n\t  };\n\t\n\t  BulbsDfp.prototype.handleInterval = function handleInterval() {\n\t    var browserVisibility = document.visibilityState;\n\t\n\t    _util2.default.getAnalyticsManager().sendEvent({\n\t      eventCategory: 'bulbs-dfp-element Live Metrics',\n\t      eventAction: '30-second-refresh-candidate-' + browserVisibility,\n\t      eventLabel: this.dataset.adUnit\n\t    });\n\t\n\t    if (this.isViewable) {\n\t      _util2.default.getAnalyticsManager().sendEvent({\n\t        eventCategory: 'bulbs-dfp-element Live Metrics',\n\t        eventAction: '30-second-refresh-triggered-' + browserVisibility,\n\t        eventLabel: this.dataset.adUnit\n\t      });\n\t\n\t      if (browserVisibility === 'visible') {\n\t        this.adsManager.reloadAds(this);\n\t      }\n\t    }\n\t  };\n\t\n\t  _createClass(BulbsDfp, [{\n\t    key: 'isViewable',\n\t    get: function get() {\n\t      return _util2.default.InViewMonitor.isElementInViewport(this, null, {\n\t        distanceFromTop: this.offsetHeight * 0.66,\n\t        distanceFromBottom: -(this.offsetHeight * 0.66)\n\t      });\n\t    }\n\t  }, {\n\t    key: 'adsManager',\n\t    get: function get() {\n\t      return window.BULBS_ELEMENTS_ADS_MANAGER;\n\t    }\n\t  }]);\n\t\n\t  return BulbsDfp;\n\t}(_register.BulbsHTMLElement);\n\t\n\texports.default = BulbsDfp;\n\t\n\t\n\tBulbsDfp.extends = 'div';\n\t\n\t(0, _register.registerElement)('bulbs-dfp', BulbsDfp);\n\n/***/ }\n]);\n\n\n// WEBPACK FOOTER //\n// bulbs-dfp.js","import util from 'bulbs-elements/util';\nimport invariant from 'invariant';\nimport {\n  registerElement,\n  BulbsHTMLElement,\n} from 'bulbs-elements/register';\n\nexport default class BulbsDfp extends BulbsHTMLElement {\n  attachedCallback () {\n\n    invariant(this.hasAttribute('viewport-threshold'),\n        '<div is=\"bulbs-dfp\"> MUST specify a `viewport-threshold` property. ' +\n        'This value defines how many screens away from the viewport the slot ' +\n        'will be in order to trigger an ad load. 1.2 = 120% viewport height.');\n\n    util.getAnalyticsManager().sendEvent({\n      eventCategory: 'bulbs-dfp-element Metrics',\n      eventAction: 'attached',\n      eventLabel: this.dataset.adUnit,\n    });\n\n    this.handleEnterViewport = this.handleEnterViewport.bind(this);\n    this.handleExitViewport = this.handleExitViewport.bind(this);\n    this.handleInterval = this.handleInterval.bind(this);\n    this.handleSlotRenderEnded = this.handleSlotRenderEnded.bind(this);\n    this.handleImpressionViewable = this.handleImpressionViewable.bind(this);\n    this.handleSlotOnload = this.handleSlotOnload.bind(this);\n\n    this.addEventListener('enterviewport', this.handleEnterViewport);\n    this.addEventListener('exitviewport', this.handleExitViewport);\n    this.addEventListener('dfpSlotRenderEnded', this.handleSlotRenderEnded);\n    this.addEventListener('dfpImpressionViewable', this.handleImpressionViewable);\n    this.addEventListener('dfpSlotOnload', this.handleSlotOnload);\n\n    let threshold = parseFloat(this.getAttribute('viewport-threshold'), 10);\n    util.InViewMonitor.add(this, {\n      get distanceFromTop () {\n        return window.innerHeight * threshold;\n      },\n      get distanceFromBottom () {\n        return -(window.innerHeight * threshold);\n      },\n    });\n\n    let defaultRefreshInterval = 30000;\n    this.adUnitData = this.adsManager.adUnits.units[this.dataset.adUnit];\n    if (!this.adUnitData.refreshDisabled) {\n\n      this.refreshInterval = window.setInterval(\n        this.handleInterval,\n        this.adUnitData.refreshInterval || defaultRefreshInterval\n      );\n    }\n  }\n\n  detachedCallback () {\n    util.InViewMonitor.remove(this);\n\n    if (this.refreshInterval) {\n      window.clearInterval(this.refreshInterval);\n    }\n  }\n\n  handleEnterViewport () {\n    if(!this.trackedEnterViewport) {\n      this.trackedEnterViewport = true;\n      util.getAnalyticsManager().sendEvent({\n        eventCategory: 'bulbs-dfp-element Metrics',\n        eventAction: 'enterviewport',\n        eventLabel: this.dataset.adUnit,\n      });\n    }\n    /* We are taking our time rolling out this change.\n     *  1) we want to make sure the page-speed implications of putting\n     *      bulbs-elements in the critical path for ad loading isn't too heavy\n     *  2) we want to look at analytics to get some idea of how often this will\n     *      happen.\n     *\n     * The eventual strategy will be:\n    this.adsManager.loadAds(this)\n     */\n  }\n\n  handleExitViewport () {\n    if(!this.trackedExitViewport) {\n      this.trackedExitViewport = true;\n      util.getAnalyticsManager().sendEvent({\n        eventCategory: 'bulbs-dfp-element Metrics',\n        eventAction: 'exitviewport',\n        eventLabel: this.dataset.adUnit,\n      });\n    }\n\n    /* We are taking our time rolling out this change.\n     *  1) we want to make sure the page-speed implications of putting\n     *      bulbs-elements in the critical path for ad loading isn't too heavy\n     *  2) we want to look at analytics to get some idea of how often this will\n     *      happen.\n     *\n     * The eventual strategy will be:\n    this.adsManager.unloadAds(this)\n     */\n  }\n\n  handleSlotRenderEnded () {\n    util.getAnalyticsManager().sendEvent({\n      eventCategory: 'bulbs-dfp-element Metrics',\n      eventAction: 'slotrenderended',\n      eventLabel: this.dataset.adUnit,\n    });\n  }\n\n  handleImpressionViewable () {\n    util.getAnalyticsManager().sendEvent({\n      eventCategory: 'bulbs-dfp-element Metrics',\n      eventAction: 'impressionviewable',\n      eventLabel: this.dataset.adUnit,\n    });\n  }\n\n  handleSlotOnload () {\n    util.getAnalyticsManager().sendEvent({\n      eventCategory: 'bulbs-dfp-element Metrics',\n      eventAction: 'slotonload',\n      eventLabel: this.dataset.adUnit,\n    });\n  }\n\n  handleInterval () {\n    let browserVisibility = document.visibilityState;\n\n    util.getAnalyticsManager().sendEvent({\n      eventCategory: 'bulbs-dfp-element Live Metrics',\n      eventAction: `30-second-refresh-candidate-${browserVisibility}`,\n      eventLabel: this.dataset.adUnit,\n    });\n\n    if (this.isViewable) {\n      util.getAnalyticsManager().sendEvent({\n        eventCategory: 'bulbs-dfp-element Live Metrics',\n        eventAction: `30-second-refresh-triggered-${browserVisibility}`,\n        eventLabel: this.dataset.adUnit,\n      });\n\n      if (browserVisibility === 'visible') {\n        this.adsManager.reloadAds(this);\n      }\n    }\n  }\n\n  get isViewable () {\n    return util.InViewMonitor.isElementInViewport(this, null, {\n      distanceFromTop: this.offsetHeight * 0.66,\n      distanceFromBottom: -(this.offsetHeight * 0.66),\n    });\n  }\n\n  get adsManager () {\n    return window.BULBS_ELEMENTS_ADS_MANAGER;\n  }\n}\n\nBulbsDfp.extends = 'div';\n\nregisterElement('bulbs-dfp', BulbsDfp);\n\n\n\n// WEBPACK FOOTER //\n// ./elements/bulbs-dfp/bulbs-dfp.js"],"sourceRoot":""}