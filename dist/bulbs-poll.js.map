{"version":3,"sources":["webpack:///dist/bulbs-poll.js","webpack:///./elements/bulbs-poll/bulbs-poll.js","webpack:///./elements/bulbs-poll/bulbs-poll-store.js","webpack:///./elements/bulbs-poll/fields/poll.js","webpack:///./elements/bulbs-poll/fields/selected-answer.js","webpack:///./elements/bulbs-poll/fields/winning-answers.js","webpack:///./elements/bulbs-poll/fields/vote.js","webpack:///./elements/bulbs-poll/fields/src.js","webpack:///./elements/bulbs-poll/fields/now.js","webpack:///./elements/bulbs-poll/components/root.js","webpack:///./elements/bulbs-poll/components/loading.js","webpack:///./elements/bulbs-poll/components/question.js","webpack:///./elements/bulbs-poll/components/cover.js","webpack:///./elements/bulbs-poll/components/answers.js","webpack:///./elements/bulbs-poll/components/answer.js","webpack:///./elements/bulbs-poll/components/selection-marker.js","webpack:///./elements/bulbs-poll/components/image-answer.js","webpack:///./elements/bulbs-poll/components/vote-button.js","webpack:///./elements/bulbs-poll/components/request-error.js","webpack:///./elements/bulbs-poll/components/results.js","webpack:///./elements/bulbs-poll/components/results-list.js","webpack:///./elements/bulbs-poll/components/result.js","webpack:///./elements/bulbs-poll/components/image-result.js","webpack:///./elements/bulbs-poll/components/ended.js","webpack:///./elements/bulbs-poll/components/coming-soon.js"],"names":["webpackJsonp",0,"module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_defaults","defaults","keys","Object","getOwnPropertyNames","i","length","key","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","setPrototypeOf","_react","_react2","_register","_bulbsElement","_bulbsElement2","_bulbsPollStore","_bulbsPollStore2","_root","_root2","BulbsPoll","_BulbsElement","this","apply","arguments","initialDispatch","store","actions","setSrc","props","src","fetchPollData","getCachedVoteData","render","createElement","data-track-action","data","state","displayName","propTypes","PropTypes","string","isRequired","registerReactElement",169,"_store","_poll","_poll2","_selectedAnswer","_selectedAnswer2","_winningAnswers","_winningAnswers2","_vote","_vote2","_src","_src2","_now","_now2","PollStore","_Store","Store","defineFields","poll","selectedAnswer","winningAnswers","vote","now",177,"setImmediate","_toConsumableArray","arr","Array","isArray","arr2","from","parsePoll","_extends","published","Date","end_date","assign","target","source","hasOwnProperty","_arrayFind","_arrayFind2","PollField","Field","initialState","answers","requestInFlight","setPollTotalVotes","Action","count","total_votes","updateAnswerVoteCount","answer","eachAnswer","sodahead_id","id","nextAnswer","answerIndex","indexOf","totalVotes","concat","slice","request","credentials","success","fetchPollDataSuccess","failure","fetchPollDataFailure","error","fetchPollDataError","collectWinningAnswers","requestFailure","requestError","resetFetchPollData","_null",179,"SelectedAnswerField","selectAnswer",180,"WinningAnswersField","highScore","forEach","push",181,"cacheKey","pollId","VoteField","voted","pollKey","localStorage","getItem","JSON","parse","makeVoteRequest","method","headers","Accept","Content-Type","body","voteRequestSuccess","voteRequestFailure","voteRequestError","setItem","stringify","resetVoteRequest",182,"SrcField",183,"NowField",184,"Root","pollData","pollNotLoaded","pollIsPublished","pollHasEnded","viewerHasVoted","_loading2","_ended2","_results2","_question2","_comingSoon2","_loading","_question","_results","_ended","_comingSoon","object",185,"Loading","className",186,"Question","_props$actions","_props$data","_cover2","_requestError2","reset","_answers2","_voteButton2","_cover","_answers","_voteButton","_requestError",187,"Cover","thumbnail","_croppedImage2","image","question_text","_croppedImage",189,"Answers","AnswerType","_answer2","listClassName","answer_type","_imageAnswer2","classNames","_classnames2","bulbs-poll-answers-selected","map","index","_answer","_imageAnswer","_classnames","array","func",190,"Answer","isSelected","bulbs-poll-answer-selected","data-track-label","onClick","bind","_selectionMarker2","answer_text","_selectionMarker",192,"SelectionMarker","width","height","cx","cy","r","fill","stroke","strokeWidth","bool",193,"ImageAnswer","answer_image_url",194,"VoteButton","handleClick","buttonIsDisabled","classes","bulbs-poll-footer","disabled",195,"RequestError","_ref","children",196,"Results","_resultsList2","_resultsList",197,"ResultsList","ResultType","_result2","_imageResult2","_result","_imageResult",198,"Result","isWinningAnswer","winningAnswer","isVoteAnswer","bulbs-poll-result-winning","bulbs-poll-result-selected","percent","percentResult","toFixed","style",199,"ImageResult",200,"Ended",201,"ComingSoon",202],"mappings":"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","file":"dist/bulbs-poll.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _register = __webpack_require__(153);\n\t\n\tvar _bulbsElement = __webpack_require__(168);\n\t\n\tvar _bulbsElement2 = _interopRequireDefault(_bulbsElement);\n\t\n\tvar _bulbsPollStore = __webpack_require__(169);\n\t\n\tvar _bulbsPollStore2 = _interopRequireDefault(_bulbsPollStore);\n\t\n\tvar _root = __webpack_require__(184);\n\t\n\tvar _root2 = _interopRequireDefault(_root);\n\t\n\t__webpack_require__(202);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar BulbsPoll = function (_BulbsElement) {\n\t  _inherits(BulbsPoll, _BulbsElement);\n\t\n\t  function BulbsPoll() {\n\t    _classCallCheck(this, BulbsPoll);\n\t\n\t    return _possibleConstructorReturn(this, _BulbsElement.apply(this, arguments));\n\t  }\n\t\n\t  BulbsPoll.prototype.initialDispatch = function initialDispatch() {\n\t    this.store.actions.setSrc(this.props.src);\n\t    this.store.actions.fetchPollData(this.props.src);\n\t    this.store.actions.getCachedVoteData(this.props.src);\n\t  };\n\t\n\t  BulbsPoll.prototype.render = function render() {\n\t    return _react2.default.createElement(\n\t      'div',\n\t      { 'data-track-action': 'Poll' },\n\t      _react2.default.createElement(_root2.default, {\n\t        data: this.state,\n\t        actions: this.store.actions\n\t      })\n\t    );\n\t  };\n\t\n\t  return BulbsPoll;\n\t}(_bulbsElement2.default);\n\t\n\tBulbsPoll.displayName = 'BulbsPoll';\n\t\n\tBulbsPoll.store = _bulbsPollStore2.default;\n\t\n\tBulbsPoll.propTypes = {\n\t  src: _react.PropTypes.string.isRequired\n\t};\n\t\n\t(0, _register.registerReactElement)('bulbs-poll', BulbsPoll);\n\n/***/ },\n\n/***/ 169:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tvar _poll = __webpack_require__(177);\n\t\n\tvar _poll2 = _interopRequireDefault(_poll);\n\t\n\tvar _selectedAnswer = __webpack_require__(179);\n\t\n\tvar _selectedAnswer2 = _interopRequireDefault(_selectedAnswer);\n\t\n\tvar _winningAnswers = __webpack_require__(180);\n\t\n\tvar _winningAnswers2 = _interopRequireDefault(_winningAnswers);\n\t\n\tvar _vote = __webpack_require__(181);\n\t\n\tvar _vote2 = _interopRequireDefault(_vote);\n\t\n\tvar _src = __webpack_require__(182);\n\t\n\tvar _src2 = _interopRequireDefault(_src);\n\t\n\tvar _now = __webpack_require__(183);\n\t\n\tvar _now2 = _interopRequireDefault(_now);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar PollStore = function (_Store) {\n\t  _inherits(PollStore, _Store);\n\t\n\t  function PollStore() {\n\t    _classCallCheck(this, PollStore);\n\t\n\t    return _possibleConstructorReturn(this, _Store.apply(this, arguments));\n\t  }\n\t\n\t  return PollStore;\n\t}(_store.Store);\n\t\n\texports.default = PollStore;\n\t\n\t\n\t_store.Store.defineFields(PollStore, {\n\t  poll: _poll2.default,\n\t  selectedAnswer: _selectedAnswer2.default,\n\t  winningAnswers: _winningAnswers2.default,\n\t  vote: _vote2.default,\n\t  src: _src2.default,\n\t  now: _now2.default\n\t});\n\n/***/ },\n\n/***/ 177:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tvar _arrayFind = __webpack_require__(178);\n\t\n\tvar _arrayFind2 = _interopRequireDefault(_arrayFind);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tfunction parsePoll(props) {\n\t  var poll = _extends({}, props);\n\t\n\t  if (poll.published) {\n\t    poll.published = new Date(poll.published);\n\t  }\n\t\n\t  if (poll.end_date) {\n\t    poll.end_date = new Date(poll.end_date);\n\t  }\n\t\n\t  return poll;\n\t}\n\t\n\tvar PollField = new _store.Field({\n\t  initialState: {\n\t    data: {\n\t      answers: []\n\t    },\n\t    requestInFlight: false\n\t  },\n\t  setPollTotalVotes: new _store.Action(function (state, count) {\n\t    state.data.total_votes = count;\n\t    return state;\n\t  }),\n\t  updateAnswerVoteCount: new _store.Action(function (state, vote) {\n\t    state.data = _extends({}, state.data);\n\t    var answer = (0, _arrayFind2.default)(state.data.answers, function (eachAnswer) {\n\t      return eachAnswer.sodahead_id === vote.answer.id;\n\t    });\n\t\n\t    var nextAnswer = _extends({}, answer);\n\t    var answerIndex = state.data.answers.indexOf(answer);\n\t    nextAnswer.total_votes = vote.answer.totalVotes;\n\t    state.data.answers = [].concat(_toConsumableArray(state.data.answers.slice(0, answerIndex)), [nextAnswer], _toConsumableArray(state.data.answers.slice(answerIndex + 1)));\n\t\n\t    return state;\n\t  }),\n\t  fetchPollData: new _store.Action(function (state, src, store) {\n\t    src || (src = store.src);\n\t    store.src = src;\n\t    this.request(src, {\n\t      credentials: 'include',\n\t      success: store.actions.fetchPollDataSuccess,\n\t      failure: store.actions.fetchPollDataFailure,\n\t      error: store.actions.fetchPollDataError\n\t    });\n\t    state.requestInFlight = true;\n\t    return state;\n\t  }),\n\t  fetchPollDataSuccess: new _store.Action(function (state, data, store) {\n\t    state.data = parsePoll(data);\n\t    state.requestInFlight = false;\n\t\n\t    setImmediate(function () {\n\t      store.actions.collectWinningAnswers(store.state.poll.data.answers);\n\t    });\n\t\n\t    return state;\n\t  }),\n\t  fetchPollDataFailure: new _store.Action(function (state, failure) {\n\t    state.requestFailure = failure;\n\t    state.requestInFlight = false;\n\t    return state;\n\t  }),\n\t  fetchPollDataError: new _store.Action(function (state, error) {\n\t    state.requestError = error;\n\t    state.requestInFlight = false;\n\t    return state;\n\t  }),\n\t  resetFetchPollData: new _store.Action(function (state, _null, store) {\n\t    state.requestInFlight = false;\n\t    delete state.requestFailure;\n\t    delete state.requestError;\n\t    setImmediate(store.actions.fetchPollData);\n\t    return state;\n\t  })\n\t});\n\t\n\texports.default = PollField;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(154).setImmediate))\n\n/***/ },\n\n/***/ 179:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tvar SelectedAnswerField = new _store.Field({\n\t  initialState: {},\n\t  selectAnswer: new _store.Action(function (state, answer) {\n\t    return state && state.id === answer.id ? {} : answer;\n\t  })\n\t});\n\t\n\texports.default = SelectedAnswerField;\n\n/***/ },\n\n/***/ 180:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tvar WinningAnswersField = new _store.Field({\n\t  initialState: [],\n\t  collectWinningAnswers: new _store.Action(function (state) {\n\t    var answers = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\t\n\t    var highScore = 0;\n\t    var winningAnswers = [];\n\t\n\t    answers.forEach(function (eachAnswer) {\n\t      if (eachAnswer.total_votes === highScore) {\n\t        winningAnswers.push(eachAnswer);\n\t      } else if (eachAnswer.total_votes > highScore) {\n\t        highScore = eachAnswer.total_votes;\n\t        winningAnswers = [eachAnswer];\n\t      }\n\t    });\n\t\n\t    return winningAnswers;\n\t  })\n\t});\n\t\n\texports.default = WinningAnswersField;\n\n/***/ },\n\n/***/ 181:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tfunction cacheKey(pollId) {\n\t  return 'bulbs-poll:' + pollId + ':vote';\n\t}\n\t\n\tvar VoteField = new _store.Field({\n\t  initialState: {\n\t    voted: false\n\t  },\n\t  getCachedVoteData: new _store.Action(function (state, pollKey) {\n\t    var value = localStorage.getItem(cacheKey(pollKey));\n\t    if (value) {\n\t      state.voted = true;\n\t      state.data = JSON.parse(value);\n\t    }\n\t    return state;\n\t  }),\n\t  makeVoteRequest: new _store.Action(function (state, answer, store) {\n\t    var poll = store.state.poll;\n\t\n\t    this.request('https://onion.sodahead.com/api/polls/' + poll.data.sodahead_id + '/vote/', {\n\t      method: 'post',\n\t      headers: {\n\t        'Accept': 'application/json',\n\t        'Content-Type': 'application/json'\n\t      },\n\t      body: 'answer=' + answer.sodahead_id,\n\t      success: store.actions.voteRequestSuccess,\n\t      failure: store.actions.voteRequestFailure,\n\t      error: store.actions.voteRequestError\n\t    });\n\t\n\t    state.requestInFlight = true;\n\t    return state;\n\t  }),\n\t  voteRequestSuccess: new _store.Action(function (state, data, store) {\n\t    localStorage.setItem(cacheKey(store.state.src), JSON.stringify(data.vote));\n\t    setImmediate(function () {\n\t      store.actions.setPollTotalVotes(data.poll.totalVotes);\n\t      store.actions.updateAnswerVoteCount(data.vote);\n\t      store.actions.collectWinningAnswers(store.state.poll.data.answers);\n\t    });\n\t    state.voted = true;\n\t    state.data = data.vote;\n\t    state.requestInFlight = false;\n\t    return state;\n\t  }),\n\t  voteRequestFailure: new _store.Action(function (state, failure) {\n\t    state.requestFailure = failure;\n\t    state.requestInFlight = false;\n\t    return state;\n\t  }),\n\t  voteRequestError: new _store.Action(function (state, error) {\n\t    state.requestInFlight = false;\n\t    state.requestError = error;\n\t    return state;\n\t  }),\n\t  resetVoteRequest: new _store.Action(function (state) {\n\t    state.requestInFlight = false;\n\t    delete state.requestFailure;\n\t    delete state.requestError;\n\t    return state;\n\t  })\n\t});\n\t\n\texports.default = VoteField;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(154).setImmediate))\n\n/***/ },\n\n/***/ 182:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tvar SrcField = new _store.Field({\n\t  initialState: '',\n\t  setSrc: new _store.Action(function (state, src) {\n\t    return src;\n\t  })\n\t});\n\t\n\texports.default = SrcField;\n\n/***/ },\n\n/***/ 183:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tvar NowField = new _store.Field({\n\t  initialState: new Date()\n\t});\n\t\n\texports.default = NowField;\n\n/***/ },\n\n/***/ 184:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Root;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _loading = __webpack_require__(185);\n\t\n\tvar _loading2 = _interopRequireDefault(_loading);\n\t\n\tvar _question = __webpack_require__(186);\n\t\n\tvar _question2 = _interopRequireDefault(_question);\n\t\n\tvar _results = __webpack_require__(196);\n\t\n\tvar _results2 = _interopRequireDefault(_results);\n\t\n\tvar _ended = __webpack_require__(200);\n\t\n\tvar _ended2 = _interopRequireDefault(_ended);\n\t\n\tvar _comingSoon = __webpack_require__(201);\n\t\n\tvar _comingSoon2 = _interopRequireDefault(_comingSoon);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Root(props) {\n\t  var pollData = props.data.poll.data;\n\t  var now = props.data.now;\n\t  var pollNotLoaded = !pollData.id;\n\t  var pollIsPublished = pollData.published && pollData.published <= now;\n\t  var pollHasEnded = pollData.end_date && pollData.end_date <= now;\n\t  var viewerHasVoted = props.data.vote.voted;\n\t\n\t  if (pollNotLoaded) {\n\t    return _react2.default.createElement(_loading2.default, null);\n\t  } else if (!pollIsPublished) {\n\t    return _react2.default.createElement(_comingSoon2.default, null);\n\t  } else if (pollHasEnded) {\n\t    return _react2.default.createElement(_ended2.default, {\n\t      data: props.data\n\t    });\n\t  } else if (viewerHasVoted) {\n\t    return _react2.default.createElement(_results2.default, {\n\t      data: props.data\n\t    });\n\t  } else if (pollIsPublished) {\n\t    return _react2.default.createElement(_question2.default, {\n\t      actions: props.actions,\n\t      data: props.data\n\t    });\n\t  }\n\t}\n\t\n\tRoot.propTypes = {\n\t  actions: _react.PropTypes.object.isRequired,\n\t  data: _react.PropTypes.object.isRequired\n\t};\n\n/***/ },\n\n/***/ 185:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Loading;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Loading() {\n\t  return _react2.default.createElement(\n\t    'div',\n\t    { className: 'bulbs-poll-loading' },\n\t    'Loading Poll...'\n\t  );\n\t}\n\n/***/ },\n\n/***/ 186:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Question;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _cover = __webpack_require__(187);\n\t\n\tvar _cover2 = _interopRequireDefault(_cover);\n\t\n\tvar _answers = __webpack_require__(189);\n\t\n\tvar _answers2 = _interopRequireDefault(_answers);\n\t\n\tvar _voteButton = __webpack_require__(194);\n\t\n\tvar _voteButton2 = _interopRequireDefault(_voteButton);\n\t\n\tvar _requestError = __webpack_require__(195);\n\t\n\tvar _requestError2 = _interopRequireDefault(_requestError);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Question(props) {\n\t  var _props$actions = props.actions;\n\t  var selectAnswer = _props$actions.selectAnswer;\n\t  var makeVoteRequest = _props$actions.makeVoteRequest;\n\t  var resetFetchPollData = _props$actions.resetFetchPollData;\n\t  var resetVoteRequest = _props$actions.resetVoteRequest;\n\t  var _props$data = props.data;\n\t  var poll = _props$data.poll;\n\t  var selectedAnswer = _props$data.selectedAnswer;\n\t  var vote = _props$data.vote;\n\t\n\t\n\t  return _react2.default.createElement(\n\t    'div',\n\t    null,\n\t    _react2.default.createElement(_cover2.default, { poll: poll }),\n\t    _react2.default.createElement(\n\t      _requestError2.default,\n\t      {\n\t        error: poll.requestError,\n\t        reset: resetFetchPollData\n\t      },\n\t      'Could not connect to network when fetching poll data.'\n\t    ),\n\t    _react2.default.createElement(\n\t      _requestError2.default,\n\t      {\n\t        error: vote.requestError,\n\t        reset: resetVoteRequest\n\t      },\n\t      'Could not connect to network when placing your vote.'\n\t    ),\n\t    _react2.default.createElement(_answers2.default, {\n\t      answers: poll.data.answers,\n\t      selectAnswer: selectAnswer,\n\t      selectedAnswer: selectedAnswer,\n\t      poll: poll\n\t    }),\n\t    _react2.default.createElement(_voteButton2.default, {\n\t      selectedAnswer: selectedAnswer,\n\t      makeVoteRequest: makeVoteRequest\n\t    })\n\t  );\n\t}\n\t\n\tQuestion.propTypes = {\n\t  actions: _react.PropTypes.object.isRequired,\n\t  data: _react.PropTypes.object.isRequired\n\t};\n\n/***/ },\n\n/***/ 187:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Cover;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _croppedImage = __webpack_require__(188);\n\t\n\tvar _croppedImage2 = _interopRequireDefault(_croppedImage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Cover(props) {\n\t  var poll = props.poll;\n\t\n\t  return _react2.default.createElement(\n\t    'header',\n\t    { className: 'bulbs-poll-cover' },\n\t    poll.data.thumbnail ? _react2.default.createElement(_croppedImage2.default, { image: poll.data.thumbnail }) : null,\n\t    _react2.default.createElement(\n\t      'h1',\n\t      { className: 'bulbs-poll-cover-title' },\n\t      poll.data.question_text\n\t    )\n\t  );\n\t}\n\t\n\tCover.propTypes = {\n\t  poll: _react.PropTypes.object.isRequired\n\t};\n\n/***/ },\n\n/***/ 189:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = Answers;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _answer = __webpack_require__(190);\n\t\n\tvar _answer2 = _interopRequireDefault(_answer);\n\t\n\tvar _imageAnswer = __webpack_require__(193);\n\t\n\tvar _imageAnswer2 = _interopRequireDefault(_imageAnswer);\n\t\n\tvar _classnames = __webpack_require__(191);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Answers(props) {\n\t  var AnswerType = _answer2.default;\n\t  var listClassName = 'bulbs-poll-answers';\n\t  if (props.poll.data.answer_type === 'imageText') {\n\t    AnswerType = _imageAnswer2.default;\n\t    listClassName = 'bulbs-poll-image-answers';\n\t  }\n\t\n\t  var classNames = (0, _classnames2.default)(listClassName, {\n\t    'bulbs-poll-answers-selected': props.selectedAnswer.id\n\t  });\n\t  return _react2.default.createElement(\n\t    'ul',\n\t    { className: classNames },\n\t    props.answers.map(function (answer, index) {\n\t      return _react2.default.createElement(AnswerType, _extends({\n\t        key: index,\n\t        answer: answer\n\t      }, props));\n\t    })\n\t  );\n\t}\n\t\n\tAnswers.propTypes = {\n\t  answers: _react.PropTypes.array.isRequired,\n\t  poll: _react.PropTypes.object.isRequired,\n\t  selectAnswer: _react.PropTypes.func.isRequired,\n\t  selectedAnswer: _react.PropTypes.object.isRequired\n\t};\n\n/***/ },\n\n/***/ 190:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Answer;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _classnames = __webpack_require__(191);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tvar _selectionMarker = __webpack_require__(192);\n\t\n\tvar _selectionMarker2 = _interopRequireDefault(_selectionMarker);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Answer(props) {\n\t  var answer = props.answer;\n\t  var selectAnswer = props.selectAnswer;\n\t  var selectedAnswer = props.selectedAnswer;\n\t\n\t\n\t  var isSelected = answer.id === selectedAnswer.id;\n\t  var className = (0, _classnames2.default)('bulbs-poll-answer', {\n\t    'bulbs-poll-answer-selected': isSelected\n\t  });\n\t\n\t  return _react2.default.createElement(\n\t    'li',\n\t    {\n\t      'data-track-label': 'Option',\n\t      className: className,\n\t      onClick: selectAnswer.bind(null, answer)\n\t    },\n\t    _react2.default.createElement(_selectionMarker2.default, { isSelected: isSelected }),\n\t    answer.answer_text\n\t  );\n\t}\n\t\n\tAnswer.propTypes = {\n\t  answer: _react.PropTypes.object.isRequired,\n\t  selectAnswer: _react.PropTypes.func.isRequired,\n\t  selectedAnswer: _react.PropTypes.object\n\t};\n\n/***/ },\n\n/***/ 192:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = SelectionMarker;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction SelectionMarker(props) {\n\t  var isSelected = props.isSelected;\n\t\n\t\n\t  return _react2.default.createElement(\n\t    \"svg\",\n\t    { width: \"20px\", height: \"20px\" },\n\t    _react2.default.createElement(\"circle\", { cx: \"10\", cy: \"10\", r: \"8\", fill: \"none\", stroke: \"black\", strokeWidth: \"2px\" }),\n\t    _react2.default.createElement(\"circle\", { cx: \"10\", cy: \"10\", r: \"5\", fill: isSelected ? 'black' : 'none' })\n\t  );\n\t}\n\t\n\tSelectionMarker.propTypes = {\n\t  isSelected: _react.PropTypes.bool\n\t};\n\n/***/ },\n\n/***/ 193:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = ImageAnswer;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _classnames = __webpack_require__(191);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tvar _selectionMarker = __webpack_require__(192);\n\t\n\tvar _selectionMarker2 = _interopRequireDefault(_selectionMarker);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction ImageAnswer(props) {\n\t  var answer = props.answer;\n\t  var selectAnswer = props.selectAnswer;\n\t  var selectedAnswer = props.selectedAnswer;\n\t\n\t\n\t  var isSelected = answer.id === selectedAnswer.id;\n\t  var className = (0, _classnames2.default)('bulbs-poll-image-answer', {\n\t    'bulbs-poll-answer-selected': isSelected\n\t  });\n\t\n\t  return _react2.default.createElement(\n\t    'li',\n\t    {\n\t      'data-track-label': 'Option',\n\t      className: className,\n\t      onClick: selectAnswer.bind(null, answer)\n\t    },\n\t    _react2.default.createElement('img', { src: answer.answer_image_url }),\n\t    _react2.default.createElement(\n\t      'div',\n\t      { className: 'answer-image-text' },\n\t      _react2.default.createElement(_selectionMarker2.default, { isSelected: isSelected }),\n\t      answer.answer_text\n\t    )\n\t  );\n\t}\n\t\n\tImageAnswer.propTypes = {\n\t  answer: _react.PropTypes.object.isRequired,\n\t  selectAnswer: _react.PropTypes.func.isRequired,\n\t  selectedAnswer: _react.PropTypes.object\n\t};\n\n/***/ },\n\n/***/ 194:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = VoteButton;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _classnames = __webpack_require__(191);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction VoteButton(props) {\n\t  var selectedAnswer = props.selectedAnswer;\n\t\n\t\n\t  var buttonIsDisabled = true;\n\t  if (selectedAnswer && selectedAnswer.id) {\n\t    buttonIsDisabled = false;\n\t  }\n\t\n\t  function handleClick() {\n\t    if (selectedAnswer) {\n\t      props.makeVoteRequest(selectedAnswer);\n\t    }\n\t  }\n\t\n\t  var classes = (0, _classnames2.default)('bulbs-poll-vote', {\n\t    'bulbs-poll-footer': true\n\t  });\n\t\n\t  return _react2.default.createElement(\n\t    'button',\n\t    {\n\t      'data-track-label': 'Submit',\n\t      className: classes,\n\t      onClick: handleClick,\n\t      disabled: buttonIsDisabled\n\t    },\n\t    'Vote'\n\t  );\n\t}\n\t\n\tVoteButton.propTypes = {\n\t  makeVoteRequest: _react.PropTypes.func,\n\t  selectedAnswer: _react.PropTypes.object\n\t};\n\n/***/ },\n\n/***/ 195:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = RequestError;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction RequestError(_ref) {\n\t  var error = _ref.error;\n\t  var children = _ref.children;\n\t  var reset = _ref.reset;\n\t\n\t  if (error) {\n\t    return _react2.default.createElement(\n\t      \"div\",\n\t      { className: \"bulbs-poll-network-error\" },\n\t      _react2.default.createElement(\n\t        \"p\",\n\t        null,\n\t        children\n\t      ),\n\t      _react2.default.createElement(\n\t        \"button\",\n\t        { onClick: reset },\n\t        \"OK\"\n\t      )\n\t    );\n\t  } else {\n\t    return _react2.default.createElement(\"div\", null);\n\t  }\n\t}\n\n/***/ },\n\n/***/ 196:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Results;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _classnames = __webpack_require__(191);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tvar _cover = __webpack_require__(187);\n\t\n\tvar _cover2 = _interopRequireDefault(_cover);\n\t\n\tvar _resultsList = __webpack_require__(197);\n\t\n\tvar _resultsList2 = _interopRequireDefault(_resultsList);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Results(props) {\n\t  var className = (0, _classnames2.default)('bulbs-poll-results', {});\n\t  var _props$data = props.data;\n\t  var poll = _props$data.poll;\n\t  var winningAnswers = _props$data.winningAnswers;\n\t  var vote = _props$data.vote;\n\t\n\t\n\t  return _react2.default.createElement(\n\t    'div',\n\t    { className: className },\n\t    _react2.default.createElement(_cover2.default, { poll: poll }),\n\t    _react2.default.createElement(_resultsList2.default, {\n\t      poll: poll,\n\t      winningAnswers: winningAnswers,\n\t      vote: vote\n\t    }),\n\t    _react2.default.createElement(\n\t      'div',\n\t      { className: 'bulbs-poll-thank-you bulbs-poll-footer' },\n\t      'Thanks for voting!'\n\t    )\n\t  );\n\t}\n\t\n\tResults.propTypes = {\n\t  data: _react.PropTypes.object.isRequired\n\t};\n\n/***/ },\n\n/***/ 197:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = ResultsList;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _result = __webpack_require__(198);\n\t\n\tvar _result2 = _interopRequireDefault(_result);\n\t\n\tvar _imageResult = __webpack_require__(199);\n\t\n\tvar _imageResult2 = _interopRequireDefault(_imageResult);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction ResultsList(props) {\n\t  var poll = props.poll;\n\t  var winningAnswers = props.winningAnswers;\n\t  var vote = props.vote;\n\t\n\t  var ResultType = _result2.default;\n\t  var listClassName = 'bulbs-poll-results-list';\n\t  if (props.poll.data.answer_type === 'imageText') {\n\t    ResultType = _imageResult2.default;\n\t    listClassName = 'bulbs-poll-image-results-list';\n\t  }\n\t  return _react2.default.createElement(\n\t    'ul',\n\t    { className: listClassName },\n\t    poll.data.answers.map(function (answer, index) {\n\t      return _react2.default.createElement(ResultType, {\n\t        key: index,\n\t        answer: answer,\n\t        poll: poll,\n\t        vote: vote,\n\t        winningAnswers: winningAnswers\n\t      });\n\t    })\n\t  );\n\t}\n\t\n\tResultsList.propTypes = {\n\t  poll: _react.PropTypes.object.isRequired,\n\t  vote: _react.PropTypes.object.isRequired,\n\t  winningAnswers: _react.PropTypes.array.isRequired\n\t};\n\n/***/ },\n\n/***/ 198:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Result;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _classnames = __webpack_require__(191);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tvar _selectionMarker = __webpack_require__(192);\n\t\n\tvar _selectionMarker2 = _interopRequireDefault(_selectionMarker);\n\t\n\tvar _arrayFind = __webpack_require__(178);\n\t\n\tvar _arrayFind2 = _interopRequireDefault(_arrayFind);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Result(props) {\n\t  var answer = props.answer;\n\t  var poll = props.poll;\n\t  var vote = props.vote;\n\t  var winningAnswers = props.winningAnswers;\n\t\n\t\n\t  var isWinningAnswer = (0, _arrayFind2.default)(winningAnswers, function (winningAnswer) {\n\t    return winningAnswer.sodahead_id === answer.sodahead_id;\n\t  });\n\t\n\t  var isVoteAnswer = !!(vote.data && vote.data.answer.id === answer.sodahead_id);\n\t\n\t  var className = (0, _classnames2.default)('bulbs-poll-result', {\n\t    'bulbs-poll-result-winning': isWinningAnswer,\n\t    'bulbs-poll-result-selected': isVoteAnswer\n\t  });\n\t  var total_votes = answer.total_votes;\n\t\n\t  var percent = void 0;\n\t  if (poll.data.total_votes > 1) {\n\t    percent = total_votes / poll.data.total_votes * 100;\n\t  } else {\n\t    percent = total_votes * 100;\n\t  }\n\t  var percentResult = percent.toFixed(0) + '%';\n\t\n\t  return _react2.default.createElement(\n\t    'li',\n\t    { className: className },\n\t    _react2.default.createElement('div', {\n\t      className: 'bulbs-poll-answer-bar',\n\t      style: { width: percentResult }\n\t    }),\n\t    _react2.default.createElement(\n\t      'div',\n\t      { className: 'bulbs-poll-answer-title' },\n\t      _react2.default.createElement(_selectionMarker2.default, { isSelected: isVoteAnswer }),\n\t      _react2.default.createElement(\n\t        'span',\n\t        { className: 'bulbs-poll-answer-text' },\n\t        answer.answer_text\n\t      ),\n\t      _react2.default.createElement(\n\t        'span',\n\t        { className: 'bulbs-poll-answer-result' },\n\t        percentResult\n\t      )\n\t    )\n\t  );\n\t}\n\t\n\tResult.propTypes = {\n\t  answer: _react.PropTypes.object.isRequired,\n\t  poll: _react.PropTypes.object.isRequired,\n\t  vote: _react.PropTypes.object.isRequired,\n\t  winningAnswers: _react.PropTypes.array.isRequired\n\t};\n\n/***/ },\n\n/***/ 199:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = ImageResult;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _classnames = __webpack_require__(191);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tvar _selectionMarker = __webpack_require__(192);\n\t\n\tvar _selectionMarker2 = _interopRequireDefault(_selectionMarker);\n\t\n\tvar _arrayFind = __webpack_require__(178);\n\t\n\tvar _arrayFind2 = _interopRequireDefault(_arrayFind);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction ImageResult(props) {\n\t  var answer = props.answer;\n\t  var poll = props.poll;\n\t  var vote = props.vote;\n\t  var winningAnswers = props.winningAnswers;\n\t\n\t\n\t  var isWinningAnswer = (0, _arrayFind2.default)(winningAnswers, function (winningAnswer) {\n\t    return winningAnswer.sodahead_id === answer.sodahead_id;\n\t  });\n\t\n\t  var isVoteAnswer = !!(vote.data && vote.data.answer.id === answer.sodahead_id);\n\t\n\t  var className = (0, _classnames2.default)('bulbs-poll-image-result', {\n\t    'bulbs-poll-result-winning': isWinningAnswer,\n\t    'bulbs-poll-result-selected': isVoteAnswer\n\t  });\n\t  var total_votes = answer.total_votes;\n\t\n\t  var percent = void 0;\n\t  if (poll.data.total_votes > 1) {\n\t    percent = total_votes / poll.data.total_votes * 100;\n\t  } else {\n\t    percent = total_votes * 100;\n\t  }\n\t  var percentResult = percent.toFixed(0) + '%';\n\t\n\t  return _react2.default.createElement(\n\t    'li',\n\t    { className: className },\n\t    _react2.default.createElement(\n\t      'div',\n\t      { className: 'result-image-list-item' },\n\t      _react2.default.createElement('div', {\n\t        className: 'bulbs-poll-image-answer-bar',\n\t        style: { height: percentResult }\n\t      }),\n\t      _react2.default.createElement(\n\t        'div',\n\t        { className: 'bulbs-poll-image-answer-title' },\n\t        _react2.default.createElement('img', { src: answer.answer_image_url }),\n\t        _react2.default.createElement(\n\t          'div',\n\t          { className: 'answer-image-text' },\n\t          _react2.default.createElement(_selectionMarker2.default, { isSelected: isVoteAnswer }),\n\t          _react2.default.createElement(\n\t            'span',\n\t            { className: 'bulbs-poll-image-answer-text' },\n\t            answer.answer_text\n\t          )\n\t        )\n\t      )\n\t    ),\n\t    _react2.default.createElement(\n\t      'div',\n\t      { className: 'bulbs-poll-answer-result' },\n\t      percentResult\n\t    )\n\t  );\n\t}\n\t\n\tImageResult.propTypes = {\n\t  answer: _react.PropTypes.object.isRequired,\n\t  poll: _react.PropTypes.object.isRequired,\n\t  vote: _react.PropTypes.object.isRequired,\n\t  winningAnswers: _react.PropTypes.array.isRequired\n\t};\n\n/***/ },\n\n/***/ 200:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Ended;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _cover = __webpack_require__(187);\n\t\n\tvar _cover2 = _interopRequireDefault(_cover);\n\t\n\tvar _resultsList = __webpack_require__(197);\n\t\n\tvar _resultsList2 = _interopRequireDefault(_resultsList);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Ended(props) {\n\t  var _props$data = props.data;\n\t  var poll = _props$data.poll;\n\t  var winningAnswers = _props$data.winningAnswers;\n\t  var vote = _props$data.vote;\n\t\n\t\n\t  return _react2.default.createElement(\n\t    'div',\n\t    { className: 'bulbs-poll-ended' },\n\t    _react2.default.createElement(_cover2.default, { poll: poll }),\n\t    _react2.default.createElement(_resultsList2.default, {\n\t      poll: poll,\n\t      winningAnswers: winningAnswers,\n\t      vote: vote\n\t    }),\n\t    _react2.default.createElement(\n\t      'div',\n\t      { className: 'bulbs-poll-ended-message bulbs-poll-footer' },\n\t      'Poll Closed'\n\t    )\n\t  );\n\t}\n\t\n\tEnded.propTypes = {\n\t  data: _react.PropTypes.object.isRequired\n\t};\n\n/***/ },\n\n/***/ 201:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = ComingSoon;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _voteButton = __webpack_require__(194);\n\t\n\tvar _voteButton2 = _interopRequireDefault(_voteButton);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction ComingSoon() {\n\t  return _react2.default.createElement(\n\t    'div',\n\t    { className: 'bulbs-poll-coming-soon' },\n\t    _react2.default.createElement(\n\t      'div',\n\t      { className: 'bulbs-poll-coming-soon-message' },\n\t      'Poll Coming Soon'\n\t    ),\n\t    _react2.default.createElement(_voteButton2.default, null)\n\t  );\n\t}\n\n/***/ },\n\n/***/ 202:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** dist/bulbs-poll.js\n **/","import React, { PropTypes } from 'react';\nimport { registerReactElement } from 'bulbs-elements/register';\nimport BulbsElement from 'bulbs-elements/bulbs-element';\n\nimport PollStore from './bulbs-poll-store';\n\nimport BulbsPollRoot from './components/root';\n\nimport './bulbs-poll.scss';\n\nclass BulbsPoll extends BulbsElement {\n  initialDispatch () {\n    this.store.actions.setSrc(this.props.src);\n    this.store.actions.fetchPollData(this.props.src);\n    this.store.actions.getCachedVoteData(this.props.src);\n  }\n\n  render () {\n    return (\n      <div data-track-action='Poll'>\n        <BulbsPollRoot\n          data={this.state}\n          actions={this.store.actions}\n        />\n      </div>\n    );\n  }\n}\n\nBulbsPoll.displayName = 'BulbsPoll';\n\nBulbsPoll.store = PollStore;\n\nBulbsPoll.propTypes = {\n  src: PropTypes.string.isRequired,\n};\n\nregisterReactElement('bulbs-poll', BulbsPoll);\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/bulbs-poll.js\n **/","import { Store } from 'bulbs-elements/store';\n\nimport PollField from './fields/poll';\nimport SelectedAnswerField from './fields/selected-answer';\nimport WinningAnswersField from './fields/winning-answers';\nimport VoteField from './fields/vote';\nimport SrcField from './fields/src';\nimport NowField from './fields/now';\n\nexport default class PollStore extends Store { }\n\nStore.defineFields(PollStore, {\n  poll: PollField,\n  selectedAnswer: SelectedAnswerField,\n  winningAnswers: WinningAnswersField,\n  vote: VoteField,\n  src: SrcField,\n  now: NowField,\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/bulbs-poll-store.js\n **/","import { Field, Action } from 'bulbs-elements/store';\nimport find from 'array-find';\n\nfunction parsePoll (props) {\n  let poll = Object.assign({}, props);\n\n  if (poll.published) {\n    poll.published = new Date(poll.published);\n  }\n\n  if (poll.end_date) {\n    poll.end_date = new Date(poll.end_date);\n  }\n\n  return poll;\n}\n\nconst PollField = new Field({\n  initialState: {\n    data: {\n      answers: [],\n    },\n    requestInFlight: false,\n  },\n  setPollTotalVotes: new Action(function (state, count) {\n    state.data.total_votes = count;\n    return state;\n  }),\n  updateAnswerVoteCount: new Action(function (state, vote) {\n    state.data = Object.assign({}, state.data);\n    let answer = find(state.data.answers, (eachAnswer) => {\n      return eachAnswer.sodahead_id === vote.answer.id;\n    });\n\n    let nextAnswer = Object.assign({}, answer);\n    let answerIndex = state.data.answers.indexOf(answer);\n    nextAnswer.total_votes = vote.answer.totalVotes;\n    state.data.answers = [\n      ...state.data.answers.slice(0, answerIndex),\n      nextAnswer,\n      ...state.data.answers.slice(answerIndex + 1),\n    ];\n\n    return state;\n  }),\n  fetchPollData: new Action(function (state, src, store) {\n    src || (src = store.src);\n    store.src = src;\n    this.request(src, {\n      credentials: 'include',\n      success: store.actions.fetchPollDataSuccess,\n      failure: store.actions.fetchPollDataFailure,\n      error: store.actions.fetchPollDataError,\n    });\n    state.requestInFlight = true;\n    return state;\n  }),\n  fetchPollDataSuccess: new Action(function (state, data, store) {\n    state.data = parsePoll(data);\n    state.requestInFlight = false;\n\n    setImmediate(() => {\n      store.actions.collectWinningAnswers(store.state.poll.data.answers);\n    });\n\n    return state;\n  }),\n  fetchPollDataFailure: new Action(function (state, failure) {\n    state.requestFailure = failure;\n    state.requestInFlight = false;\n    return state;\n  }),\n  fetchPollDataError: new Action(function (state, error) {\n    state.requestError = error;\n    state.requestInFlight = false;\n    return state;\n  }),\n  resetFetchPollData: new Action(function (state, _null, store) {\n    state.requestInFlight = false;\n    delete state.requestFailure;\n    delete state.requestError;\n    setImmediate(store.actions.fetchPollData);\n    return state;\n  }),\n});\n\nexport default PollField;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/fields/poll.js\n **/","import { Field, Action } from 'bulbs-elements/store';\n\nconst SelectedAnswerField = new Field({\n  initialState: {},\n  selectAnswer: new Action(function (state, answer) {\n    return (state && state.id === answer.id) ? {} : answer;\n  }),\n});\n\nexport default SelectedAnswerField;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/fields/selected-answer.js\n **/","import { Field, Action } from 'bulbs-elements/store';\n\nconst WinningAnswersField = new Field({\n  initialState: [],\n  collectWinningAnswers: new Action(function (state, answers = []) {\n    let highScore = 0;\n    let winningAnswers = [];\n\n    answers.forEach((eachAnswer) => {\n      if (eachAnswer.total_votes === highScore) {\n        winningAnswers.push(eachAnswer);\n      }\n      else if (eachAnswer.total_votes > highScore) {\n        highScore = eachAnswer.total_votes;\n        winningAnswers = [eachAnswer];\n      }\n    });\n\n    return winningAnswers;\n  }),\n});\n\nexport default WinningAnswersField;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/fields/winning-answers.js\n **/","import { Field, Action } from 'bulbs-elements/store';\n\nfunction cacheKey (pollId) {\n  return `bulbs-poll:${pollId}:vote`;\n}\n\nconst VoteField = new Field({\n  initialState: {\n    voted: false,\n  },\n  getCachedVoteData: new Action(function (state, pollKey) {\n    let value = localStorage.getItem(cacheKey(pollKey));\n    if (value) {\n      state.voted = true;\n      state.data = JSON.parse(value);\n    }\n    return state;\n  }),\n  makeVoteRequest: new Action(function (state, answer, store) {\n    let { poll } = store.state;\n    this.request(`https://onion.sodahead.com/api/polls/${poll.data.sodahead_id}/vote/`, {\n      method: 'post',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: `answer=${answer.sodahead_id}`,\n      success: store.actions.voteRequestSuccess,\n      failure: store.actions.voteRequestFailure,\n      error: store.actions.voteRequestError,\n    });\n\n    state.requestInFlight = true;\n    return state;\n  }),\n  voteRequestSuccess: new Action(function (state, data, store) {\n    localStorage.setItem(cacheKey(store.state.src), JSON.stringify(data.vote));\n    setImmediate(() => {\n      store.actions.setPollTotalVotes(data.poll.totalVotes);\n      store.actions.updateAnswerVoteCount(data.vote);\n      store.actions.collectWinningAnswers(store.state.poll.data.answers);\n    });\n    state.voted = true;\n    state.data = data.vote;\n    state.requestInFlight = false;\n    return state;\n  }),\n  voteRequestFailure: new Action(function (state, failure) {\n    state.requestFailure = failure;\n    state.requestInFlight = false;\n    return state;\n  }),\n  voteRequestError: new Action(function (state, error) {\n    state.requestInFlight = false;\n    state.requestError = error;\n    return state;\n  }),\n  resetVoteRequest: new Action(function (state) {\n    state.requestInFlight = false;\n    delete state.requestFailure;\n    delete state.requestError;\n    return state;\n  }),\n});\n\nexport default VoteField;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/fields/vote.js\n **/","import { Field, Action } from 'bulbs-elements/store';\n\nconst SrcField = new Field({\n  initialState: '',\n  setSrc: new Action(function (state, src) {\n    return src;\n  }),\n});\n\nexport default SrcField;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/fields/src.js\n **/","import { Field } from 'bulbs-elements/store';\n\nconst NowField = new Field({\n  initialState: new Date(),\n});\n\nexport default NowField;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/fields/now.js\n **/","import React, { PropTypes } from 'react';\n\nimport PollLoading from './loading';\nimport PollQuestion from './question';\nimport PollResults from './results';\nimport PollEnded from './ended';\nimport ComingSoon from './coming-soon';\n\nexport default function Root (props) {\n  let pollData = props.data.poll.data;\n  let now = props.data.now;\n  let pollNotLoaded = !pollData.id;\n  let pollIsPublished = pollData.published && pollData.published <= now;\n  let pollHasEnded = pollData.end_date && pollData.end_date <= now;\n  let viewerHasVoted = props.data.vote.voted;\n\n  if (pollNotLoaded) {\n    return <PollLoading/>;\n  }\n  else if (!pollIsPublished) {\n    return <ComingSoon/>;\n  }\n  else if (pollHasEnded) {\n    return <PollEnded\n      data={props.data}\n    />;\n  }\n  else if (viewerHasVoted) {\n    return <PollResults\n      data={props.data}\n    />;\n  }\n  else if (pollIsPublished) {\n    return <PollQuestion\n      actions={props.actions}\n      data={props.data}\n    />;\n  }\n}\n\nRoot.propTypes = {\n  actions: PropTypes.object.isRequired,\n  data: PropTypes.object.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/root.js\n **/","import React from 'react';\n\nexport default function Loading () {\n  return (\n    <div className='bulbs-poll-loading'>\n      Loading Poll...\n    </div>\n  );\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/loading.js\n **/","import React, { PropTypes } from 'react';\n\nimport Cover from './cover';\nimport Answers from './answers';\nimport VoteButton from './vote-button';\nimport RequestError from './request-error';\n\nexport default function Question (props) {\n  let {\n    selectAnswer,\n    makeVoteRequest,\n    resetFetchPollData,\n    resetVoteRequest,\n  } = props.actions;\n\n  let {\n    poll,\n    selectedAnswer,\n    vote,\n  } = props.data;\n\n  return (\n    <div>\n      <Cover poll={poll} />\n\n      <RequestError\n        error={poll.requestError}\n        reset={resetFetchPollData}\n      >\n        Could not connect to network when fetching poll data.\n      </RequestError>\n\n      <RequestError\n        error={vote.requestError}\n        reset={resetVoteRequest}\n      >\n        Could not connect to network when placing your vote.\n      </RequestError>\n\n      <Answers\n        answers={poll.data.answers}\n        selectAnswer={selectAnswer}\n        selectedAnswer={selectedAnswer}\n        poll={poll}\n      />\n\n      <VoteButton\n        selectedAnswer={selectedAnswer}\n        makeVoteRequest={makeVoteRequest}\n      />\n    </div>\n  );\n}\n\nQuestion.propTypes = {\n  actions: PropTypes.object.isRequired,\n  data: PropTypes.object.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/question.js\n **/","import React, { PropTypes } from 'react';\nimport CroppedImage from 'bulbs-elements/components/cropped-image';\n\nexport default function Cover (props) {\n  let { poll } = props;\n  return (\n    <header className=\"bulbs-poll-cover\">\n      {\n        poll.data.thumbnail ? <CroppedImage image={poll.data.thumbnail} /> : null\n      }\n      <h1 className=\"bulbs-poll-cover-title\">\n        { poll.data.question_text }\n      </h1>\n    </header>\n  );\n}\n\nCover.propTypes = {\n  poll: PropTypes.object.isRequired,\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/cover.js\n **/","import React, { PropTypes } from 'react';\nimport Answer from './answer';\nimport ImageAnswer from './image-answer';\nimport classnames from 'classnames';\n\nexport default function Answers (props) {\n  let AnswerType = Answer;\n  let listClassName = 'bulbs-poll-answers';\n  if (props.poll.data.answer_type === 'imageText') {\n    AnswerType = ImageAnswer;\n    listClassName = 'bulbs-poll-image-answers';\n  }\n\n  let classNames = classnames(listClassName, {\n    'bulbs-poll-answers-selected': props.selectedAnswer.id,\n  });\n  return (\n    <ul className={classNames}>\n      {\n        props.answers.map((answer, index) => {\n          return <AnswerType\n            key={index}\n            answer={answer}\n            {...props}\n          />;\n        })\n      }\n    </ul>\n  );\n}\n\nAnswers.propTypes = {\n  answers: PropTypes.array.isRequired,\n  poll: PropTypes.object.isRequired,\n  selectAnswer: PropTypes.func.isRequired,\n  selectedAnswer: PropTypes.object.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/answers.js\n **/","import React, { PropTypes } from 'react';\nimport classnames from 'classnames';\nimport SelectionMarker from './selection-marker';\n\nexport default function Answer (props) {\n  let {\n    answer,\n    selectAnswer,\n    selectedAnswer,\n  } = props;\n\n  let isSelected = answer.id === selectedAnswer.id;\n  let className = classnames('bulbs-poll-answer', {\n    'bulbs-poll-answer-selected': isSelected,\n  });\n\n  return (\n    <li\n      data-track-label='Option'\n      className={className}\n      onClick={selectAnswer.bind(null, answer)}\n    >\n      <SelectionMarker isSelected={isSelected} />\n      { answer.answer_text }\n    </li>\n  );\n}\n\nAnswer.propTypes = {\n  answer: PropTypes.object.isRequired,\n  selectAnswer: PropTypes.func.isRequired,\n  selectedAnswer: PropTypes.object,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/answer.js\n **/","import React, { PropTypes } from 'react';\n\nexport default function SelectionMarker (props) {\n  let {\n    isSelected,\n  } = props;\n\n  return (\n    <svg width=\"20px\" height=\"20px\">\n      <circle cx=\"10\" cy=\"10\" r=\"8\" fill=\"none\" stroke=\"black\" strokeWidth=\"2px\" />\n      <circle cx=\"10\" cy=\"10\" r=\"5\" fill={isSelected ? 'black' : 'none' } />\n    </svg>\n  );\n}\n\nSelectionMarker.propTypes = {\n  isSelected: PropTypes.bool,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/selection-marker.js\n **/","import React, { PropTypes } from 'react';\nimport classnames from 'classnames';\nimport SelectionMarker from './selection-marker';\n\nexport default function ImageAnswer (props) {\n  let {\n    answer,\n    selectAnswer,\n    selectedAnswer,\n  } = props;\n\n  let isSelected = answer.id === selectedAnswer.id;\n  let className = classnames('bulbs-poll-image-answer', {\n    'bulbs-poll-answer-selected': isSelected,\n  });\n\n  return (\n    <li\n      data-track-label='Option'\n      className={className}\n      onClick={selectAnswer.bind(null, answer)}\n    >\n      <img src={ answer.answer_image_url }/>\n      <div className=\"answer-image-text\">\n        <SelectionMarker isSelected={isSelected} />\n        { answer.answer_text }\n      </div>\n    </li>\n  );\n}\n\nImageAnswer.propTypes = {\n  answer: PropTypes.object.isRequired,\n  selectAnswer: PropTypes.func.isRequired,\n  selectedAnswer: PropTypes.object,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/image-answer.js\n **/","import React, { PropTypes } from 'react';\nimport classnames from 'classnames';\n\nexport default function VoteButton (props) {\n  let { selectedAnswer } = props;\n\n  let buttonIsDisabled = true;\n  if (selectedAnswer && selectedAnswer.id) {\n    buttonIsDisabled = false;\n  }\n\n  function handleClick () {\n    if (selectedAnswer) {\n      props.makeVoteRequest(selectedAnswer);\n    }\n  }\n\n  let classes = classnames('bulbs-poll-vote', {\n    'bulbs-poll-footer': true,\n  });\n\n  return (\n    <button\n      data-track-label='Submit'\n      className={classes}\n      onClick={handleClick}\n      disabled={buttonIsDisabled}\n    >\n      Vote\n    </button>\n  );\n}\n\nVoteButton.propTypes = {\n  makeVoteRequest: PropTypes.func,\n  selectedAnswer: PropTypes.object,\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/vote-button.js\n **/","import React from 'react';\n\nexport default function RequestError ({ error, children, reset }) {\n  if (error) {\n    return (\n      <div className=\"bulbs-poll-network-error\">\n        <p>\n          { children }\n        </p>\n        <button onClick={reset}>OK</button>\n      </div>\n    );\n  }\n  else {\n    return <div />;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/request-error.js\n **/","import React, { PropTypes } from 'react';\nimport classnames from 'classnames';\n\nimport Cover from './cover';\nimport ResultsList from './results-list';\n\nexport default function Results (props) {\n  let className = classnames('bulbs-poll-results', {});\n  let {\n    poll,\n    winningAnswers,\n    vote,\n  } = props.data;\n\n  return (\n    <div className={className}>\n      <Cover poll={poll} />\n      <ResultsList\n        poll={poll}\n        winningAnswers={winningAnswers}\n        vote={vote}\n      />\n      <div className='bulbs-poll-thank-you bulbs-poll-footer'>\n        Thanks for voting!\n      </div>\n    </div>\n  );\n}\n\nResults.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/results.js\n **/","import React, { PropTypes } from 'react';\nimport Result from './result';\nimport ImageResult from './image-result';\n\nexport default function ResultsList (props) {\n  let {\n    poll,\n    winningAnswers,\n    vote,\n  } = props;\n  let ResultType = Result;\n  let listClassName = 'bulbs-poll-results-list';\n  if(props.poll.data.answer_type === 'imageText') {\n    ResultType = ImageResult;\n    listClassName = 'bulbs-poll-image-results-list';\n  }\n  return (\n    <ul className={listClassName}>\n      {\n        poll.data.answers.map((answer, index) => {\n          return <ResultType\n            key={index}\n            answer={answer}\n            poll={poll}\n            vote={vote}\n            winningAnswers={winningAnswers}\n          />;\n        })\n      }\n    </ul>\n  );\n}\n\nResultsList.propTypes = {\n  poll: PropTypes.object.isRequired,\n  vote: PropTypes.object.isRequired,\n  winningAnswers: PropTypes.array.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/results-list.js\n **/","import React, { PropTypes } from 'react';\nimport classnames from 'classnames';\nimport SelectionMarker from './selection-marker';\nimport find from 'array-find';\n\nexport default function Result (props) {\n  let {\n    answer,\n    poll,\n    vote,\n    winningAnswers,\n  } = props;\n\n  let isWinningAnswer = find(winningAnswers, (winningAnswer) => {\n    return winningAnswer.sodahead_id === answer.sodahead_id;\n  });\n\n  let isVoteAnswer = !!(vote.data && vote.data.answer.id === answer.sodahead_id);\n\n  let className = classnames('bulbs-poll-result', {\n    'bulbs-poll-result-winning': isWinningAnswer,\n    'bulbs-poll-result-selected': isVoteAnswer,\n  });\n  let { total_votes } = answer;\n  let percent;\n  if(poll.data.total_votes > 1) {\n    percent = (total_votes / poll.data.total_votes) * 100;\n  }\n  else {\n    percent = total_votes * 100;\n  }\n  let percentResult = `${percent.toFixed(0)}%`;\n\n  return (\n    <li className={className}>\n      <div\n        className='bulbs-poll-answer-bar'\n        style={{ width: percentResult }}\n      />\n      <div className='bulbs-poll-answer-title'>\n        <SelectionMarker isSelected={isVoteAnswer}/>\n        <span className='bulbs-poll-answer-text'>\n          { answer.answer_text }\n        </span>\n        <span className='bulbs-poll-answer-result'>\n          { percentResult }\n        </span>\n      </div>\n    </li>\n  );\n}\n\nResult.propTypes = {\n  answer: PropTypes.object.isRequired,\n  poll: PropTypes.object.isRequired,\n  vote: PropTypes.object.isRequired,\n  winningAnswers: PropTypes.array.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/result.js\n **/","import React, { PropTypes } from 'react';\nimport classnames from 'classnames';\nimport SelectionMarker from './selection-marker';\nimport find from 'array-find';\n\nexport default function ImageResult (props) {\n  let {\n    answer,\n    poll,\n    vote,\n    winningAnswers,\n  } = props;\n\n  let isWinningAnswer = find(winningAnswers, (winningAnswer) => {\n    return winningAnswer.sodahead_id === answer.sodahead_id;\n  });\n\n  let isVoteAnswer = !!(vote.data && vote.data.answer.id === answer.sodahead_id);\n\n  let className = classnames('bulbs-poll-image-result', {\n    'bulbs-poll-result-winning': isWinningAnswer,\n    'bulbs-poll-result-selected': isVoteAnswer,\n  });\n  let { total_votes } = answer;\n  let percent;\n  if(poll.data.total_votes > 1) {\n    percent = (total_votes / poll.data.total_votes) * 100;\n  }\n  else {\n    percent = total_votes * 100;\n  }\n  let percentResult = `${percent.toFixed(0)}%`;\n\n  return (\n    <li className={className}>\n      <div className=\"result-image-list-item\">\n        <div\n          className='bulbs-poll-image-answer-bar'\n          style={{ height: percentResult }}\n        />\n        <div className='bulbs-poll-image-answer-title'>\n          <img src={ answer.answer_image_url } />\n          <div className=\"answer-image-text\">\n            <SelectionMarker isSelected={isVoteAnswer}/>\n            <span className='bulbs-poll-image-answer-text'>\n              { answer.answer_text }\n            </span>\n          </div>\n        </div>\n      </div>\n      <div className='bulbs-poll-answer-result'>\n        { percentResult }\n      </div>\n    </li>\n  );\n}\n\nImageResult.propTypes = {\n  answer: PropTypes.object.isRequired,\n  poll: PropTypes.object.isRequired,\n  vote: PropTypes.object.isRequired,\n  winningAnswers: PropTypes.array.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/image-result.js\n **/","import React, { PropTypes } from 'react';\nimport Cover from './cover';\nimport ResultsList from './results-list';\n\nexport default function Ended (props) {\n  let {\n    poll,\n    winningAnswers,\n    vote,\n  } = props.data;\n\n  return (\n    <div className='bulbs-poll-ended'>\n      <Cover poll={poll}/>\n      <ResultsList\n        poll={poll}\n        winningAnswers={winningAnswers}\n        vote={vote}\n      />\n      <div className='bulbs-poll-ended-message bulbs-poll-footer'>\n        Poll Closed\n      </div>\n    </div>\n  );\n}\n\nEnded.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/ended.js\n **/","import React from 'react';\nimport VoteButton from './vote-button';\n\nexport default function ComingSoon () {\n  return (\n    <div className='bulbs-poll-coming-soon'>\n      <div className='bulbs-poll-coming-soon-message'>Poll Coming Soon</div>\n      <VoteButton/>\n    </div>\n  );\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/coming-soon.js\n **/"],"sourceRoot":""}