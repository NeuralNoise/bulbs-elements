{"version":3,"sources":["webpack:///dist/bulbs-poll.js","webpack:///./elements/bulbs-poll/bulbs-poll.js","webpack:///./elements/bulbs-poll/bulbs-poll-store.js","webpack:///./elements/bulbs-poll/fields/poll.js","webpack:///./elements/bulbs-poll/fields/selected-answer.js","webpack:///./elements/bulbs-poll/fields/winning-answers.js","webpack:///./elements/bulbs-poll/fields/vote.js","webpack:///./elements/bulbs-poll/fields/src.js","webpack:///./elements/bulbs-poll/components/question.js","webpack:///./elements/bulbs-poll/components/cover.js","webpack:///./elements/bulbs-poll/components/answers.js","webpack:///./elements/bulbs-poll/components/answer.js","webpack:///./elements/bulbs-poll/components/selection-marker.js","webpack:///./elements/bulbs-poll/components/vote-button.js","webpack:///./elements/bulbs-poll/components/request-error.js","webpack:///./elements/bulbs-poll/components/results.js","webpack:///./elements/bulbs-poll/components/result.js"],"names":["webpackJsonp",0,"module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","_react","_react2","_register","_register2","_bulbsElement","_bulbsElement2","_bulbsPollStore","_bulbsPollStore2","_question","_question2","_results","_results2","BulbsPoll","_BulbsElement","this","getPrototypeOf","apply","arguments","store","actions","setSrc","src","fetchPollData","getCachedVoteData","state","vote","voted","createElement","data","displayName","propTypes","PropTypes","string","isRequired",169,"_store","_poll","_poll2","_selectedAnswer","_selectedAnswer2","_winningAnswers","_winningAnswers2","_vote","_vote2","_src","_src2","PollStore","_Store","Store","defineFields","poll","selectedAnswer","winningAnswers",172,"setImmediate","_toConsumableArray","arr","Array","isArray","arr2","from","_extends","assign","source","hasOwnProperty","_arrayFind","_arrayFind2","PollField","Field","initialState","answers","requestInFlight","setPollTotalVotes","Action","count","total_votes","updateAnswerVoteCount","answer","eachAnswer","sodahead_id","id","nextAnswer","answerIndex","indexOf","totalVotes","concat","slice","request","credentials","success","fetchPollDataSuccess","failure","fetchPollDataFailure","error","fetchPollDataError","collectWinningAnswers","requestFailure","requestError","resetFetchPollData","_null",174,"SelectedAnswerField","selectAnswer",175,"WinningAnswersField","undefined","highScore","forEach","push",176,"cacheKey","pollId","VoteField","pollKey","localStorage","getItem","JSON","parse","makeVoteRequest","method","headers","Accept","Content-Type","body","voteRequestSuccess","voteRequestFailure","voteRequestError","setItem","stringify","resetVoteRequest",177,"SrcField",178,"Question","_props$actions","_props$data","_cover2","_requestError2","reset","_answers2","_voteButton2","_cover","_answers","_voteButton","_requestError","object",179,"Cover","className","thumbnail","_croppedImage2","image","question_text","_croppedImage",181,"Answers","classNames","_classnames2","bulbs-poll-answers-selected","map","index","_answer2","_answer","_classnames","array","func",182,"Answer","isSelected","bulbs-poll-answer-selected","onClick","bind","_selectionMarker2","answer_text","_selectionMarker",184,"SelectionMarker","width","height","cx","cy","r","fill","stroke","strokeWidth","bool",185,"VoteButton","handleClick","classes","bulbs-poll-footer","disabled",186,"RequestError","_ref","children",187,"Results","_result2","_result",188,"Result","isWinningAnswer","winningAnswer","isVoteAnswer","bulbs-poll-result-winning","bulbs-poll-result-selected","percent","percentResult","toFixed","style",189],"mappings":"AAAAA,cAAc,IAERC,EACA,SAASC,EAAQC,EAASC,GAE/B,YA8BA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASE,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIP,WAAU,iEAAoEO,GAAeD,GAASE,UAAYC,OAAOC,OAAOH,GAAcA,EAAWC,WAAaG,aAAeC,MAAON,EAAUO,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeR,IAAYE,OAAOO,eAAiBP,OAAOO,eAAeV,EAAUC,GAAcD,EAASW,UAAYV,GAlCje,GAAIW,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWX,WAAaW,EAAWX,aAAc,EAAOW,EAAWT,cAAe,EAAU,SAAWS,KAAYA,EAAWV,UAAW,GAAML,OAAOgB,eAAeL,EAAQI,EAAWE,IAAKF,IAAiB,MAAO,UAAUzB,EAAa4B,EAAYC,GAAiJ,MAA9HD,IAAYR,EAAiBpB,EAAYS,UAAWmB,GAAiBC,GAAaT,EAAiBpB,EAAa6B,GAAqB7B,MAE5hB8B,EAASrC,EAAoB,GAE7BsC,EAAUrC,EAAuBoC,GAEjCE,EAAYvC,EAAoB,KAEhCwC,EAAavC,EAAuBsC,GAEpCE,EAAgBzC,EAAoB,KAEpC0C,EAAiBzC,EAAuBwC,GAExCE,EAAkB3C,EAAoB,KAEtC4C,EAAmB3C,EAAuB0C,GAE1CE,EAAY7C,EAAoB,KAEhC8C,EAAa7C,EAAuB4C,GAEpCE,EAAW/C,EAAoB,KAE/BgD,EAAY/C,EAAuB8C,EAEvC/C,GAAoB,IAUpB,IChCKiD,GAAA,SAAAC,GDmCH,QAASD,KAGP,MAFA5C,GAAgB8C,KAAMF,GAEfxC,EAA2B0C,KAAMlC,OAAOmC,eAAeH,GAAWI,MAAMF,KAAMG,YA0BvF,MA/BAzC,GAAUoC,EAAWC,GAQrBxB,EAAauB,IACXf,IAAK,kBACLd,MAAO,WCzCR+B,KAAKI,MAAMC,QAAQC,OAAON,KAAKtB,MAAM6B,KACrCP,KAAKI,MAAMC,QAAQG,cAAcR,KAAKtB,MAAM6B,KAC5CP,KAAKI,MAAMC,QAAQI,kBAAkBT,KAAKtB,MAAM6B,QD6C/CxB,IAAK,SACLd,MAAO,WC1CR,MAAI+B,MAAKU,MAAMC,KAAKC,MACXzB,aAAA0B,cAAAhB,cACLiB,KAAMd,KAAKU,QAINvB,aAAA0B,cAAAlB,cACLU,QAASL,KAAKI,MAAMC,QACpBS,KAAMd,KAAKU,YAhBbZ,GDiEHP,aC3CHO,GAAUiB,YAAc,YAExBjB,EAAUM,MAAVX,aAEAK,EAAUkB,WACRT,IAAKrB,EAAA+B,UAAUC,OAAOC,aAGxB,EAAA9B,cAAS,aAAcS,IDiDjBsB,IACA,SAASzE,EAAQC,EAASC,GAE/B,YA4BA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMC,GAAQ,IAAKD,EAAQ,KAAM,IAAIE,gBAAe,4DAAgE,QAAOD,GAAyB,gBAATA,IAAqC,kBAATA,GAA8BD,EAAPC,EAElO,QAASE,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIP,WAAU,iEAAoEO,GAAeD,GAASE,UAAYC,OAAOC,OAAOH,GAAcA,EAAWC,WAAaG,aAAeC,MAAON,EAAUO,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeR,IAAYE,OAAOO,eAAiBP,OAAOO,eAAeV,EAAUC,GAAcD,EAASW,UAAYV,GAhCjeE,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,GAGT,IAAIoD,GAASxE,EAAoB,KAE7ByE,EAAQzE,EAAoB,KAE5B0E,EAASzE,EAAuBwE,GAEhCE,EAAkB3E,EAAoB,KAEtC4E,EAAmB3E,EAAuB0E,GAE1CE,EAAkB7E,EAAoB,KAEtC8E,EAAmB7E,EAAuB4E,GAE1CE,EAAQ/E,EAAoB,KAE5BgF,EAAS/E,EAAuB8E,GAEhCE,EAAOjF,EAAoB,KAE3BkF,EAAQjF,EAAuBgF,GE/GfE,EAAA,SAAAC,GF4HlB,QAASD,KAGP,MAFA9E,GAAgB8C,KAAMgC,GAEf1E,EAA2B0C,KAAMlC,OAAOmC,eAAe+B,GAAW9B,MAAMF,KAAMG,YAGvF,MARAzC,GAAUsE,EAAWC,GAQdD,GACPX,EAAOa,MAETtF,cAAkBoF,EEnInBX,EAAAa,MAAMC,aAAaH,GACjBI,KAAAb,aACAc,eAAAZ,aACAa,eAAAX,aACAhB,KAAAkB,aACAtB,IAAAwB,gBF2IIQ,IACA,SAAS5F,EAAQC,EAASC,IAEH,SAAS2F,GAAe,YAcpD,SAAS1F,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAAS0F,GAAmBC,GAAO,GAAIC,MAAMC,QAAQF,GAAM,CAAE,IAAK,GAAI/D,GAAI,EAAGkE,EAAOF,MAAMD,EAAI9D,QAASD,EAAI+D,EAAI9D,OAAQD,IAAOkE,EAAKlE,GAAK+D,EAAI/D,EAAM,OAAOkE,GAAe,MAAOF,OAAMG,KAAKJ,GAd1L5E,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,GAGT,IAAI8E,GAAWjF,OAAOkF,QAAU,SAAUvE,GAAU,IAAK,GAAIE,GAAI,EAAGA,EAAIwB,UAAUvB,OAAQD,IAAK,CAAE,GAAIsE,GAAS9C,UAAUxB,EAAI,KAAK,GAAII,KAAOkE,GAAcnF,OAAOD,UAAUqF,eAAe1F,KAAKyF,EAAQlE,KAAQN,EAAOM,GAAOkE,EAAOlE,IAAY,MAAON,IAEnP4C,EAASxE,EAAoB,KAE7BsG,EAAatG,EAAoB,KAEjCuG,EAActG,EAAuBqG,GGtKpCE,EAAY,GAAAhC,GAAAiC,OAChBC,cACEzC,MACE0C,YAEFC,iBAAiB,GAEnBC,kBAAmB,GAAArC,GAAAsC,OAAW,SAAUjD,EAAOkD,GAE7C,MADAlD,GAAMI,KAAK+C,YAAcD,EAClBlD,IAEToD,sBAAuB,GAAAzC,GAAAsC,OAAW,SAAUjD,EAAOC,GACjDD,EAAMI,KAAOiC,KAAkBrC,EAAMI,KACrC,IAAIiD,IAAS,EAAAX,cAAK1C,EAAMI,KAAK0C,QAAS,SAACQ,GACrC,MAAOA,GAAWC,cAAgBtD,EAAKoD,OAAOG,KAG5CC,EAAapB,KAAkBgB,GAC/BK,EAAc1D,EAAMI,KAAK0C,QAAQa,QAAQN,EAQ7C,OAPAI,GAAWN,YAAclD,EAAKoD,OAAOO,WACrC5D,EAAMI,KAAK0C,WAAXe,OAAA9B,EACK/B,EAAMI,KAAK0C,QAAQgB,MAAM,EAAGJ,KAC/BD,GAAA1B,EACG/B,EAAMI,KAAK0C,QAAQgB,MAAMJ,EAAc,KAGrC1D,IAETF,cAAe,GAAAa,GAAAsC,OAAW,SAAUjD,EAAOH,EAAKH,GAU9C,MATAG,KAAQA,EAAMH,EAAMG,KACpBH,EAAMG,IAAMA,EACZP,KAAKyE,QAAQlE,GACXmE,YAAa,UACbC,QAASvE,EAAMC,QAAQuE,qBACvBC,QAASzE,EAAMC,QAAQyE,qBACvBC,MAAO3E,EAAMC,QAAQ2E,qBAEvBtE,EAAM+C,iBAAkB,EACjB/C,IAETkE,qBAAsB,GAAAvD,GAAAsC,OAAW,SAAUjD,EAAOI,EAAMV,GAQtD,MAPAM,GAAMI,KAAOA,EACbJ,EAAM+C,iBAAkB,EAExBjB,EAAa,WACXpC,EAAMC,QAAQ4E,sBAAsB7E,EAAMM,MAAM0B,KAAKtB,KAAK0C,WAGrD9C,IAEToE,qBAAsB,GAAAzD,GAAAsC,OAAW,SAAUjD,EAAOmE,GAGhD,MAFAnE,GAAMwE,eAAiBL,EACvBnE,EAAM+C,iBAAkB,EACjB/C,IAETsE,mBAAoB,GAAA3D,GAAAsC,OAAW,SAAUjD,EAAOqE,GAG9C,MAFArE,GAAMyE,aAAeJ,EACrBrE,EAAM+C,iBAAkB,EACjB/C,IAET0E,mBAAoB,GAAA/D,GAAAsC,OAAW,SAAUjD,EAAO2E,EAAOjF,GAKrD,MAJAM,GAAM+C,iBAAkB,QACjB/C,GAAMwE,qBACNxE,GAAMyE,aACb3C,EAAapC,EAAMC,QAAQG,eACpBE,KH4KV9D,cGxKcyG,IHyKe7F,KAAKZ,EAASC,EAAoB,KAAK2F,eAI/D8C,IACA,SAAS3I,EAAQC,EAASC,GAE/B,YAEAiB,QAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,GAGT,IAAIoD,GAASxE,EAAoB,KI5P5B0I,EAAsB,GAAAlE,GAAAiC,OAC1BC,gBACAiC,aAAc,GAAAnE,GAAAsC,OAAW,SAAUjD,EAAOqD,GACxC,MAAOrD,IAAUA,EAAMwD,KAAOH,EAAOG,MAAWH,KJkQnDnH,cI9Pc2I,GJkQTE,IACA,SAAS9I,EAAQC,EAASC,GAE/B,YAEAiB,QAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,GAGT,IAAIoD,GAASxE,EAAoB,KKlR5B6I,EAAsB,GAAArE,GAAAiC,OAC1BC,gBACA0B,sBAAuB,GAAA5D,GAAAsC,OAAW,SAAUjD,GLqRzC,GKrRgD8C,GAAArD,UAAAvB,QAAA,GAAA+G,SAAAxF,UAAA,MAAUA,UAAA,GACvDyF,EAAY,EACZtD,IAYJ,OAVAkB,GAAQqC,QAAQ,SAAC7B,GACXA,EAAWH,cAAgB+B,EAC7BtD,EAAewD,KAAK9B,GAEbA,EAAWH,YAAc+B,IAChCA,EAAY5B,EAAWH,YACvBvB,GAAkB0B,MAIf1B,KLyRV1F,cKrRc8I,GLyRTK,IACA,SAASpJ,EAAQC,EAASC,IAEH,SAAS2F,GAAe,YMhTrD,SAASwD,GAAUC,GACjB,oBAAqBA,EAAA,QNiTtBnI,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,GAGT,IAAIoD,GAASxE,EAAoB,KMlT5BqJ,EAAY,GAAA7E,GAAAiC,OAChBC,cACE3C,OAAO,GAETH,kBAAmB,GAAAY,GAAAsC,OAAW,SAAUjD,EAAOyF,GAC7C,GAAIlI,GAAQmI,aAAaC,QAAQL,EAASG,GAK1C,OAJIlI,KACFyC,EAAME,OAAQ,EACdF,EAAMI,KAAOwF,KAAKC,MAAMtI,IAEnByC,IAET8F,gBAAiB,GAAAnF,GAAAsC,OAAW,SAAUjD,EAAOqD,EAAQ3D,GNyTlD,GMxTKgC,GAAShC,EAAMM,MAAf0B,IAcN,OAbApC,MAAKyE,QAAL,wCAAqDrC,EAAKtB,KAAKmD,YAAV,UACnDwC,OAAQ,OACRC,SACEC,OAAU,mBACVC,eAAgB,oBAElBC,KAAA,UAAgB9C,EAAOE,YACvBU,QAASvE,EAAMC,QAAQyG,mBACvBjC,QAASzE,EAAMC,QAAQ0G,mBACvBhC,MAAO3E,EAAMC,QAAQ2G,mBAGvBtG,EAAM+C,iBAAkB,EACjB/C,IAEToG,mBAAoB,GAAAzF,GAAAsC,OAAW,SAAUjD,EAAOI,EAAMV,GAUpD,MATAgG,cAAaa,QAAQjB,EAAS5F,EAAMM,MAAMH,KAAM+F,KAAKY,UAAUpG,EAAKH,OACpE6B,EAAa,WACXpC,EAAMC,QAAQqD,kBAAkB5C,EAAKsB,KAAKkC,YAC1ClE,EAAMC,QAAQyD,sBAAsBhD,EAAKH,MACzCP,EAAMC,QAAQ4E,sBAAsB7E,EAAMM,MAAM0B,KAAKtB,KAAK0C,WAE5D9C,EAAME,OAAQ,EACdF,EAAMI,KAAOA,EAAKH,KAClBD,EAAM+C,iBAAkB,EACjB/C,IAETqG,mBAAoB,GAAA1F,GAAAsC,OAAW,SAAUjD,EAAOmE,GAG9C,MAFAnE,GAAMwE,eAAiBL,EACvBnE,EAAM+C,iBAAkB,EACjB/C,IAETsG,iBAAkB,GAAA3F,GAAAsC,OAAW,SAAUjD,EAAOqE,GAG5C,MAFArE,GAAM+C,iBAAkB,EACxB/C,EAAMyE,aAAeJ,EACdrE,IAETyG,iBAAkB,GAAA9F,GAAAsC,OAAW,SAAUjD,GAIrC,MAHAA,GAAM+C,iBAAkB,QACjB/C,GAAMwE,qBACNxE,GAAMyE,aACNzE,KN6TV9D,cMzTcsJ,IN0Te1I,KAAKZ,EAASC,EAAoB,KAAK2F,eAI/D4E,IACA,SAASzK,EAAQC,EAASC,GAE/B,YAEAiB,QAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,GAGT,IAAIoD,GAASxE,EAAoB,KOtY5BwK,EAAW,GAAAhG,GAAAiC,OACfC,aAAc,GACdjD,OAAQ,GAAAe,GAAAsC,OAAW,SAAUjD,EAAOH,GAClC,MAAOA,MP4YV3D,cOxYcyK,GP4YTC,IACA,SAAS3K,EAAQC,EAASC,GAE/B,YA2BA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GQ5azE,QAASwK,GAAU7I,GR+a/B,GAAI8I,GQzaD9I,EAAM2B,QAJRmF,EAAAgC,EAAAhC,aACAgB,EAAAgB,EAAAhB,gBACApB,EAAAoC,EAAApC,mBACA+B,EAAAK,EAAAL,iBR+aGM,EQxaD/I,EAAMoC,KAHRsB,EAAAqF,EAAArF,KACAC,EAAAoF,EAAApF,eACA1B,EAAA8G,EAAA9G,IAGF,OACExB,cAAA0B,cR4aC,MACA,KQ5aC1B,aAAA0B,cAAA6G,cAAOtF,KAAMA,IAEbjD,aAAA0B,cR6aC8G,cQ5aC5C,MAAO3C,EAAK+C,aACZyC,MAAOxC,GRgbR,yDQ3aDjG,aAAA0B,cR8aC8G,cQ7aC5C,MAAOpE,EAAKwE,aACZyC,MAAOT,GRibR,wDQ5aDhI,aAAA0B,cAAAgH,cACErE,QAASpB,EAAKtB,KAAK0C,QACnBgC,aAAcA,EACdnD,eAAgBA,IAGlBlD,aAAA0B,cAAAiH,cACEzF,eAAgBA,EAChBmE,gBAAiBA,KR2WxB1I,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,IAETrB,aQtZuB2K,CRwZvB,IAAIrI,GAASrC,EAAoB,GAE7BsC,EAAUrC,EAAuBoC,GAEjC6I,EAASlL,EAAoB,KAE7B6K,EAAU5K,EAAuBiL,GAEjCC,EAAWnL,EAAoB,KAE/BgL,EAAY/K,EAAuBkL,GAEnCC,EAAcpL,EAAoB,KAElCiL,EAAehL,EAAuBmL,GAEtCC,EAAgBrL,EAAoB,KAEpC8K,EAAiB7K,EAAuBoL,EQ5X7CX,GAASvG,WACPX,QAASnB,EAAA+B,UAAUkH,OAAOhH,WAC1BL,KAAM5B,EAAA+B,UAAUkH,OAAOhH,aRibnBiH,IACA,SAASzL,EAAQC,EAASC,GAE/B,YAeA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GSvfzE,QAASsL,GAAO3J,GT0f5B,GSzfK0D,GAAS1D,EAAT0D,IACN,OACEjD,cAAA0B,cT0fC,US1fOyH,UAAU,oBAEdlG,EAAKtB,KAAKyH,UAAYpJ,aAAA0B,cAAA2H,cAAcC,MAAOrG,EAAKtB,KAAKyH,YAAgB,KAEvEpJ,aAAA0B,cT0fC,MS1fGyH,UAAU,0BACVlG,EAAKtB,KAAK4H,gBTkenB5K,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,IAETrB,aS7euByL,CT+evB,IAAInJ,GAASrC,EAAoB,GAE7BsC,EAAUrC,EAAuBoC,GAEjCyJ,EAAgB9L,EAAoB,KAEpC2L,EAAiB1L,EAAuB6L,ESve7CN,GAAMrH,WACJoB,KAAMlD,EAAA+B,UAAUkH,OAAOhH,aT+fnByH,IACA,SAASjM,EAAQC,EAASC,GAE/B,YAsBA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GUtiBzE,QAAS8L,GAASnK,GAC/B,GAAIoK,IAAa,EAAAC,cAAW,sBAC1BC,8BAA+BtK,EAAM2D,eAAe6B,IAEtD,OACE/E,cAAA0B,cVwiBC,MUxiBGyH,UAAWQ,GAEXpK,EAAM8E,QAAQyF,IAAI,SAAClF,EAAQmF,GACzB,MAAO/J,cAAA0B,cAAAsI,aAAApG,GACLhE,IAAKmK,EACLnF,OAAQA,GACJrF,OVugBfZ,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,GAGT,IAAI8E,GAAWjF,OAAOkF,QAAU,SAAUvE,GAAU,IAAK,GAAIE,GAAI,EAAGA,EAAIwB,UAAUvB,OAAQD,IAAK,CAAE,GAAIsE,GAAS9C,UAAUxB,EAAI,KAAK,GAAII,KAAOkE,GAAcnF,OAAOD,UAAUqF,eAAe1F,KAAKyF,EAAQlE,KAAQN,EAAOM,GAAOkE,EAAOlE,IAAY,MAAON,GAEvP7B,cUxhBuBiM,CV0hBvB,IAAI3J,GAASrC,EAAoB,GAE7BsC,EAAUrC,EAAuBoC,GAEjCkK,EAAUvM,EAAoB,KAE9BsM,EAAWrM,EAAuBsM,GAElCC,EAAcxM,EAAoB,KAElCkM,EAAejM,EAAuBuM,EUjhB3CR,GAAQ7H,WACNwC,QAAStE,EAAA+B,UAAUqI,MAAMnI,WACzBqE,aAActG,EAAA+B,UAAUsI,KAAKpI,WAC7BkB,eAAgBnD,EAAA+B,UAAUkH,OAAOhH,aV0iB7BqI,IACA,SAAS7M,EAAQC,EAASC,GAE/B,YAmBA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GWtlBzE,QAAS0M,GAAQ/K,GXylB7B,GWvlBCqF,GAGErF,EAHFqF,OACAyB,EAEE9G,EAFF8G,aACAnD,EACE3D,EADF2D,eAGEqH,EAAa3F,EAAOG,KAAO7B,EAAe6B,GAC1CoE,GAAY,EAAAS,cAAW,qBACzBY,6BAA8BD,GAGhC,OACEvK,cAAA0B,cXulBC,MWtlBCyH,UAAWA,EACXsB,QAASpE,EAAaqE,KAAK,KAAM9F,IAEjC5E,aAAA0B,cAAAiJ,cAAiBJ,WAAYA,IAC3B3F,EAAOgG,aXmjBdjM,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,IAETrB,aWxkBuB6M,CX0kBvB,IAAIvK,GAASrC,EAAoB,GAE7BsC,EAAUrC,EAAuBoC,GAEjCmK,EAAcxM,EAAoB,KAElCkM,EAAejM,EAAuBuM,GAEtCW,EAAmBnN,EAAoB,KAEvCiN,EAAoBhN,EAAuBkN,EW7jBhDP,GAAOzI,WACL+C,OAAQ7E,EAAA+B,UAAUkH,OAAOhH,WACzBqE,aAActG,EAAA+B,UAAUsI,KAAKpI,WAC7BkB,eAAgBnD,EAAA+B,UAAUkH,SX4lBtB8B,IACA,SAAStN,EAAQC,EAASC,GAE/B,YAWA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GYtoBzE,QAASmN,GAAiBxL,GZyoBtC,GYvoBCgL,GACEhL,EADFgL,UAGF,OACEvK,cAAA0B,cZuoBC,OYvoBIsJ,MAAM,OAAOC,OAAO,QACvBjL,aAAA0B,cAAA,UAAQwJ,GAAG,KAAKC,GAAG,KAAKC,EAAE,IAAIC,KAAK,OAAOC,OAAO,QAAQC,YAAY,QACrEvL,aAAA0B,cAAA,UAAQwJ,GAAG,KAAKC,GAAG,KAAKC,EAAE,IAAIC,KAAMd,EAAa,QAAU,UZqnBhE5L,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,IAETrB,aYhoBuBsN,CZkoBvB,IAAIhL,GAASrC,EAAoB,GAE7BsC,EAAUrC,EAAuBoC,EYvnBtCgL,GAAgBlJ,WACd0I,WAAYxK,EAAA+B,UAAU0J,OZ4oBlBC,IACA,SAASjO,EAAQC,EAASC,GAE/B,YAeA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,Ga3qBzE,QAAS8N,GAAYnM,GAGlC,QAASoM,KACHzI,GACF3D,EAAM8H,gBAAgBnE,GbyqBzB,Ga7qBKA,GAAmB3D,EAAnB2D,eAQF0I,GAAU,EAAAhC,cAAW,mBACvBiC,qBAAqB,GAGvB,OACE7L,cAAA0B,cb8qBC,Ua7qBCyH,UAAWyC,EACXnB,QAASkB,EACTG,UAAW5I,EAAe6B,IbirB3B,QApCJpG,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,IAETrB,aajqBuBiO,CbmqBvB,IAAI3L,GAASrC,EAAoB,GAE7BsC,EAAUrC,EAAuBoC,GAEjCmK,EAAcxM,EAAoB,KAElCkM,EAAejM,EAAuBuM,EajpB3CwB,GAAW7J,WACTwF,gBAAiBtH,EAAA+B,UAAUsI,KAC3BlH,eAAgBnD,EAAA+B,UAAUkH,SbmrBtB+C,IACA,SAASvO,EAAQC,EAASC,GAE/B,YAWA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,Gc5tBzE,QAASoO,GAATC,Gd+tBZ,Gc/tBqCrG,GAAAqG,EAAArG,MAAOsG,EAAAD,EAAAC,SAAUzD,EAAAwD,EAAAxD,KACvD,OAAI7C,GAEA5F,aAAA0B,cdkuBC,OcluBIyH,UAAU,4BACbnJ,aAAA0B,cdouBC,IACA,KcpuBGwK,GAEJlM,aAAA0B,cdsuBC,UctuBO+I,QAAShC,GdwuBhB,OcnuBEzI,aAAA0B,cAAA,YdusBV/C,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,IAETrB,acttBuBuO,CdwtBvB,IAAIjM,GAASrC,EAAoB,GAE7BsC,EAAUrC,EAAuBoC,IA+BhCoM,IACA,SAAS3O,EAAQC,EAASC,GAE/B,YAuBA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,Ge/wBzE,QAASwO,GAAS7M,GAC/B,GAAI4J,IAAY,EAAAS,cAAW,yBfkxBtBtB,Ee7wBD/I,EAAMoC,KAHRsB,EAAAqF,EAAArF,KACAE,EAAAmF,EAAAnF,eACA3B,EAAA8G,EAAA9G,IAGF,OACExB,cAAA0B,cfixBC,OejxBIyH,UAAWA,GACdnJ,aAAA0B,cAAA6G,cAAOtF,KAAMA,IACbjD,aAAA0B,cfmxBC,MenxBGyH,UAAU,2BAEVlG,EAAKtB,KAAK0C,QAAQyF,IAAI,SAAClF,EAAQmF,GAC7B,MAAO/J,cAAA0B,cAAA2K,cACLzM,IAAKmK,EACLnF,OAAQA,EACR3B,KAAMA,EACNzB,KAAMA,EACN2B,eAAgBA,OAKxBnD,aAAA0B,cfmxBC,OenxBIyH,UAAU,0CfqxBd,uBAnDNxK,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,IAETrB,ae7vBuB2O,Cf+vBvB,IAAIrM,GAASrC,EAAoB,GAE7BsC,EAAUrC,EAAuBoC,GAEjCmK,EAAcxM,EAAoB,KAElCkM,EAAejM,EAAuBuM,GAEtCtB,EAASlL,EAAoB,KAE7B6K,EAAU5K,EAAuBiL,GAEjC0D,EAAU5O,EAAoB,KAE9B2O,EAAW1O,EAAuB2O,Ee9uBvCF,GAAQvK,WACNF,KAAM5B,EAAA+B,UAAUkH,OAAOhH,afwxBnBuK,IACA,SAAS/O,EAAQC,EAASC,GAE/B,YAuBA,SAASC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GgBn1BzE,QAAS4O,GAAQjN,GhBs1B7B,GgBp1BCqF,GAIErF,EAJFqF,OACA3B,EAGE1D,EAHF0D,KACAzB,EAEEjC,EAFFiC,KACA2B,EACE5D,EADF4D,eAEEsJ,GAAkB,EAAAxI,cAAKd,EAAgB,SAACuJ,GAC1C,MAAOA,GAAc5H,cAAgBF,EAAOE,cAG1C6H,KAAkBnL,EAAKG,MAAQH,EAAKG,KAAKiD,OAAOG,KAAOH,EAAOE,aAE9DqE,GAAY,EAAAS,cAAW,qBACzBgD,4BAA6BH,EAC7BI,6BAA8BF,IAE1BjI,EAAgBE,EAAhBF,YACFoI,EAAUpI,EAAezB,EAAKtB,KAAK+C,YAAe,IAClDqI,EAAmBD,EAAQE,QAAQ,GAAhB,GAEvB,OACEhN,cAAA0B,chBq1BC,MgBr1BGyH,UAAWA,GACbnJ,aAAA0B,cAAA,OACEyH,UAAU,wBACV8D,OAASjC,MAAO+B,KAElB/M,aAAA0B,chBu1BC,OgBv1BIyH,UAAU,2BACbnJ,aAAA0B,cAAAiJ,cAAiBJ,WAAYoC,IAC7B3M,aAAA0B,chBy1BC,QgBz1BKyH,UAAU,0BACZvE,EAAOgG,aAEX5K,aAAA0B,chB21BC,QgB31BKyH,UAAU,4BACZ4D,KhB6xBXpO,OAAOgB,eAAelC,EAAS,cAC7BqB,OAAO,IAETrB,agBj0BuB+O,ChBm0BvB,IAAIzM,GAASrC,EAAoB,GAE7BsC,EAAUrC,EAAuBoC,GAEjCmK,EAAcxM,EAAoB,KAElCkM,EAAejM,EAAuBuM,GAEtCW,EAAmBnN,EAAoB,KAEvCiN,EAAoBhN,EAAuBkN,GAE3C7G,EAAatG,EAAoB,KAEjCuG,EAActG,EAAuBqG,EgBzyB1CwI,GAAO3K,WACL+C,OAAQ7E,EAAA+B,UAAUkH,OAAOhH,WACzBiB,KAAMlD,EAAA+B,UAAUkH,OAAOhH,WACvBR,KAAMzB,EAAA+B,UAAUkH,OAAOhH,WACvBmB,eAAgBpD,EAAA+B,UAAUqI,MAAMnI,ahBg2B5BkL,IACA,SAAS1P,EAAQC","file":"dist/bulbs-poll.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _register = __webpack_require__(153);\n\t\n\tvar _register2 = _interopRequireDefault(_register);\n\t\n\tvar _bulbsElement = __webpack_require__(168);\n\t\n\tvar _bulbsElement2 = _interopRequireDefault(_bulbsElement);\n\t\n\tvar _bulbsPollStore = __webpack_require__(169);\n\t\n\tvar _bulbsPollStore2 = _interopRequireDefault(_bulbsPollStore);\n\t\n\tvar _question = __webpack_require__(178);\n\t\n\tvar _question2 = _interopRequireDefault(_question);\n\t\n\tvar _results = __webpack_require__(187);\n\t\n\tvar _results2 = _interopRequireDefault(_results);\n\t\n\t__webpack_require__(189);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar BulbsPoll = function (_BulbsElement) {\n\t  _inherits(BulbsPoll, _BulbsElement);\n\t\n\t  function BulbsPoll() {\n\t    _classCallCheck(this, BulbsPoll);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(BulbsPoll).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(BulbsPoll, [{\n\t    key: 'initialDispatch',\n\t    value: function initialDispatch() {\n\t      this.store.actions.setSrc(this.props.src);\n\t      this.store.actions.fetchPollData(this.props.src);\n\t      this.store.actions.getCachedVoteData(this.props.src);\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      if (this.state.vote.voted) {\n\t        return _react2.default.createElement(_results2.default, {\n\t          data: this.state\n\t        });\n\t      } else {\n\t        return _react2.default.createElement(_question2.default, {\n\t          actions: this.store.actions,\n\t          data: this.state\n\t        });\n\t      }\n\t    }\n\t  }]);\n\t\n\t  return BulbsPoll;\n\t}(_bulbsElement2.default);\n\t\n\tBulbsPoll.displayName = 'BulbsPoll';\n\t\n\tBulbsPoll.store = _bulbsPollStore2.default;\n\t\n\tBulbsPoll.propTypes = {\n\t  src: _react.PropTypes.string.isRequired\n\t};\n\t\n\t(0, _register2.default)('bulbs-poll', BulbsPoll);\n\n/***/ },\n\n/***/ 169:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tvar _poll = __webpack_require__(172);\n\t\n\tvar _poll2 = _interopRequireDefault(_poll);\n\t\n\tvar _selectedAnswer = __webpack_require__(174);\n\t\n\tvar _selectedAnswer2 = _interopRequireDefault(_selectedAnswer);\n\t\n\tvar _winningAnswers = __webpack_require__(175);\n\t\n\tvar _winningAnswers2 = _interopRequireDefault(_winningAnswers);\n\t\n\tvar _vote = __webpack_require__(176);\n\t\n\tvar _vote2 = _interopRequireDefault(_vote);\n\t\n\tvar _src = __webpack_require__(177);\n\t\n\tvar _src2 = _interopRequireDefault(_src);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar PollStore = function (_Store) {\n\t  _inherits(PollStore, _Store);\n\t\n\t  function PollStore() {\n\t    _classCallCheck(this, PollStore);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(PollStore).apply(this, arguments));\n\t  }\n\t\n\t  return PollStore;\n\t}(_store.Store);\n\t\n\texports.default = PollStore;\n\t\n\t\n\t_store.Store.defineFields(PollStore, {\n\t  poll: _poll2.default,\n\t  selectedAnswer: _selectedAnswer2.default,\n\t  winningAnswers: _winningAnswers2.default,\n\t  vote: _vote2.default,\n\t  src: _src2.default\n\t});\n\n/***/ },\n\n/***/ 172:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tvar _arrayFind = __webpack_require__(173);\n\t\n\tvar _arrayFind2 = _interopRequireDefault(_arrayFind);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tvar PollField = new _store.Field({\n\t  initialState: {\n\t    data: {\n\t      answers: []\n\t    },\n\t    requestInFlight: false\n\t  },\n\t  setPollTotalVotes: new _store.Action(function (state, count) {\n\t    state.data.total_votes = count;\n\t    return state;\n\t  }),\n\t  updateAnswerVoteCount: new _store.Action(function (state, vote) {\n\t    state.data = _extends({}, state.data);\n\t    var answer = (0, _arrayFind2.default)(state.data.answers, function (eachAnswer) {\n\t      return eachAnswer.sodahead_id === vote.answer.id;\n\t    });\n\t\n\t    var nextAnswer = _extends({}, answer);\n\t    var answerIndex = state.data.answers.indexOf(answer);\n\t    nextAnswer.total_votes = vote.answer.totalVotes;\n\t    state.data.answers = [].concat(_toConsumableArray(state.data.answers.slice(0, answerIndex)), [nextAnswer], _toConsumableArray(state.data.answers.slice(answerIndex + 1)));\n\t\n\t    return state;\n\t  }),\n\t  fetchPollData: new _store.Action(function (state, src, store) {\n\t    src || (src = store.src);\n\t    store.src = src;\n\t    this.request(src, {\n\t      credentials: 'include',\n\t      success: store.actions.fetchPollDataSuccess,\n\t      failure: store.actions.fetchPollDataFailure,\n\t      error: store.actions.fetchPollDataError\n\t    });\n\t    state.requestInFlight = true;\n\t    return state;\n\t  }),\n\t  fetchPollDataSuccess: new _store.Action(function (state, data, store) {\n\t    state.data = data;\n\t    state.requestInFlight = false;\n\t\n\t    setImmediate(function () {\n\t      store.actions.collectWinningAnswers(store.state.poll.data.answers);\n\t    });\n\t\n\t    return state;\n\t  }),\n\t  fetchPollDataFailure: new _store.Action(function (state, failure) {\n\t    state.requestFailure = failure;\n\t    state.requestInFlight = false;\n\t    return state;\n\t  }),\n\t  fetchPollDataError: new _store.Action(function (state, error) {\n\t    state.requestError = error;\n\t    state.requestInFlight = false;\n\t    return state;\n\t  }),\n\t  resetFetchPollData: new _store.Action(function (state, _null, store) {\n\t    state.requestInFlight = false;\n\t    delete state.requestFailure;\n\t    delete state.requestError;\n\t    setImmediate(store.actions.fetchPollData);\n\t    return state;\n\t  })\n\t});\n\t\n\texports.default = PollField;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(154).setImmediate))\n\n/***/ },\n\n/***/ 174:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tvar SelectedAnswerField = new _store.Field({\n\t  initialState: {},\n\t  selectAnswer: new _store.Action(function (state, answer) {\n\t    return state && state.id === answer.id ? {} : answer;\n\t  })\n\t});\n\t\n\texports.default = SelectedAnswerField;\n\n/***/ },\n\n/***/ 175:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tvar WinningAnswersField = new _store.Field({\n\t  initialState: [],\n\t  collectWinningAnswers: new _store.Action(function (state) {\n\t    var answers = arguments.length <= 1 || arguments[1] === undefined ? [] : arguments[1];\n\t\n\t    var highScore = 0;\n\t    var winningAnswers = [];\n\t\n\t    answers.forEach(function (eachAnswer) {\n\t      if (eachAnswer.total_votes === highScore) {\n\t        winningAnswers.push(eachAnswer);\n\t      } else if (eachAnswer.total_votes > highScore) {\n\t        highScore = eachAnswer.total_votes;\n\t        winningAnswers = [eachAnswer];\n\t      }\n\t    });\n\t\n\t    return winningAnswers;\n\t  })\n\t});\n\t\n\texports.default = WinningAnswersField;\n\n/***/ },\n\n/***/ 176:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(setImmediate) {'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tfunction cacheKey(pollId) {\n\t  return 'bulbs-poll:' + pollId + ':vote';\n\t}\n\t\n\tvar VoteField = new _store.Field({\n\t  initialState: {\n\t    voted: false\n\t  },\n\t  getCachedVoteData: new _store.Action(function (state, pollKey) {\n\t    var value = localStorage.getItem(cacheKey(pollKey));\n\t    if (value) {\n\t      state.voted = true;\n\t      state.data = JSON.parse(value);\n\t    }\n\t    return state;\n\t  }),\n\t  makeVoteRequest: new _store.Action(function (state, answer, store) {\n\t    var poll = store.state.poll;\n\t\n\t    this.request('https://onion.sodahead.com/api/polls/' + poll.data.sodahead_id + '/vote/', {\n\t      method: 'post',\n\t      headers: {\n\t        'Accept': 'application/json',\n\t        'Content-Type': 'application/json'\n\t      },\n\t      body: 'answer=' + answer.sodahead_id,\n\t      success: store.actions.voteRequestSuccess,\n\t      failure: store.actions.voteRequestFailure,\n\t      error: store.actions.voteRequestError\n\t    });\n\t\n\t    state.requestInFlight = true;\n\t    return state;\n\t  }),\n\t  voteRequestSuccess: new _store.Action(function (state, data, store) {\n\t    localStorage.setItem(cacheKey(store.state.src), JSON.stringify(data.vote));\n\t    setImmediate(function () {\n\t      store.actions.setPollTotalVotes(data.poll.totalVotes);\n\t      store.actions.updateAnswerVoteCount(data.vote);\n\t      store.actions.collectWinningAnswers(store.state.poll.data.answers);\n\t    });\n\t    state.voted = true;\n\t    state.data = data.vote;\n\t    state.requestInFlight = false;\n\t    return state;\n\t  }),\n\t  voteRequestFailure: new _store.Action(function (state, failure) {\n\t    state.requestFailure = failure;\n\t    state.requestInFlight = false;\n\t    return state;\n\t  }),\n\t  voteRequestError: new _store.Action(function (state, error) {\n\t    state.requestInFlight = false;\n\t    state.requestError = error;\n\t    return state;\n\t  }),\n\t  resetVoteRequest: new _store.Action(function (state) {\n\t    state.requestInFlight = false;\n\t    delete state.requestFailure;\n\t    delete state.requestError;\n\t    return state;\n\t  })\n\t});\n\t\n\texports.default = VoteField;\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(154).setImmediate))\n\n/***/ },\n\n/***/ 177:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _store = __webpack_require__(170);\n\t\n\tvar SrcField = new _store.Field({\n\t  initialState: '',\n\t  setSrc: new _store.Action(function (state, src) {\n\t    return src;\n\t  })\n\t});\n\t\n\texports.default = SrcField;\n\n/***/ },\n\n/***/ 178:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Question;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _cover = __webpack_require__(179);\n\t\n\tvar _cover2 = _interopRequireDefault(_cover);\n\t\n\tvar _answers = __webpack_require__(181);\n\t\n\tvar _answers2 = _interopRequireDefault(_answers);\n\t\n\tvar _voteButton = __webpack_require__(185);\n\t\n\tvar _voteButton2 = _interopRequireDefault(_voteButton);\n\t\n\tvar _requestError = __webpack_require__(186);\n\t\n\tvar _requestError2 = _interopRequireDefault(_requestError);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Question(props) {\n\t  var _props$actions = props.actions;\n\t  var selectAnswer = _props$actions.selectAnswer;\n\t  var makeVoteRequest = _props$actions.makeVoteRequest;\n\t  var resetFetchPollData = _props$actions.resetFetchPollData;\n\t  var resetVoteRequest = _props$actions.resetVoteRequest;\n\t  var _props$data = props.data;\n\t  var poll = _props$data.poll;\n\t  var selectedAnswer = _props$data.selectedAnswer;\n\t  var vote = _props$data.vote;\n\t\n\t\n\t  return _react2.default.createElement(\n\t    'div',\n\t    null,\n\t    _react2.default.createElement(_cover2.default, { poll: poll }),\n\t    _react2.default.createElement(\n\t      _requestError2.default,\n\t      {\n\t        error: poll.requestError,\n\t        reset: resetFetchPollData\n\t      },\n\t      'Could not connect to network when fetching poll data.'\n\t    ),\n\t    _react2.default.createElement(\n\t      _requestError2.default,\n\t      {\n\t        error: vote.requestError,\n\t        reset: resetVoteRequest\n\t      },\n\t      'Could not connect to network when placing your vote.'\n\t    ),\n\t    _react2.default.createElement(_answers2.default, {\n\t      answers: poll.data.answers,\n\t      selectAnswer: selectAnswer,\n\t      selectedAnswer: selectedAnswer\n\t    }),\n\t    _react2.default.createElement(_voteButton2.default, {\n\t      selectedAnswer: selectedAnswer,\n\t      makeVoteRequest: makeVoteRequest\n\t    })\n\t  );\n\t}\n\t\n\tQuestion.propTypes = {\n\t  actions: _react.PropTypes.object.isRequired,\n\t  data: _react.PropTypes.object.isRequired\n\t};\n\n/***/ },\n\n/***/ 179:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Cover;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _croppedImage = __webpack_require__(180);\n\t\n\tvar _croppedImage2 = _interopRequireDefault(_croppedImage);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Cover(props) {\n\t  var poll = props.poll;\n\t\n\t  return _react2.default.createElement(\n\t    'header',\n\t    { className: 'bulbs-poll-cover' },\n\t    poll.data.thumbnail ? _react2.default.createElement(_croppedImage2.default, { image: poll.data.thumbnail }) : null,\n\t    _react2.default.createElement(\n\t      'h1',\n\t      { className: 'bulbs-poll-cover-title' },\n\t      poll.data.question_text\n\t    )\n\t  );\n\t}\n\t\n\tCover.propTypes = {\n\t  poll: _react.PropTypes.object.isRequired\n\t};\n\n/***/ },\n\n/***/ 181:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\texports.default = Answers;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _answer = __webpack_require__(182);\n\t\n\tvar _answer2 = _interopRequireDefault(_answer);\n\t\n\tvar _classnames = __webpack_require__(183);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Answers(props) {\n\t  var classNames = (0, _classnames2.default)('bulbs-poll-answers', {\n\t    'bulbs-poll-answers-selected': props.selectedAnswer.id\n\t  });\n\t  return _react2.default.createElement(\n\t    'ul',\n\t    { className: classNames },\n\t    props.answers.map(function (answer, index) {\n\t      return _react2.default.createElement(_answer2.default, _extends({\n\t        key: index,\n\t        answer: answer\n\t      }, props));\n\t    })\n\t  );\n\t}\n\t\n\tAnswers.propTypes = {\n\t  answers: _react.PropTypes.array.isRequired,\n\t  selectAnswer: _react.PropTypes.func.isRequired,\n\t  selectedAnswer: _react.PropTypes.object.isRequired\n\t};\n\n/***/ },\n\n/***/ 182:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Answer;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _classnames = __webpack_require__(183);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tvar _selectionMarker = __webpack_require__(184);\n\t\n\tvar _selectionMarker2 = _interopRequireDefault(_selectionMarker);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Answer(props) {\n\t  var answer = props.answer;\n\t  var selectAnswer = props.selectAnswer;\n\t  var selectedAnswer = props.selectedAnswer;\n\t\n\t\n\t  var isSelected = answer.id === selectedAnswer.id;\n\t  var className = (0, _classnames2.default)('bulbs-poll-answer', {\n\t    'bulbs-poll-answer-selected': isSelected\n\t  });\n\t\n\t  return _react2.default.createElement(\n\t    'li',\n\t    {\n\t      className: className,\n\t      onClick: selectAnswer.bind(null, answer)\n\t    },\n\t    _react2.default.createElement(_selectionMarker2.default, { isSelected: isSelected }),\n\t    answer.answer_text\n\t  );\n\t}\n\t\n\tAnswer.propTypes = {\n\t  answer: _react.PropTypes.object.isRequired,\n\t  selectAnswer: _react.PropTypes.func.isRequired,\n\t  selectedAnswer: _react.PropTypes.object\n\t};\n\n/***/ },\n\n/***/ 184:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = SelectionMarker;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction SelectionMarker(props) {\n\t  var isSelected = props.isSelected;\n\t\n\t\n\t  return _react2.default.createElement(\n\t    \"svg\",\n\t    { width: \"20px\", height: \"20px\" },\n\t    _react2.default.createElement(\"circle\", { cx: \"10\", cy: \"10\", r: \"8\", fill: \"none\", stroke: \"black\", strokeWidth: \"2px\" }),\n\t    _react2.default.createElement(\"circle\", { cx: \"10\", cy: \"10\", r: \"5\", fill: isSelected ? 'black' : 'none' })\n\t  );\n\t}\n\t\n\tSelectionMarker.propTypes = {\n\t  isSelected: _react.PropTypes.bool\n\t};\n\n/***/ },\n\n/***/ 185:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = VoteButton;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _classnames = __webpack_require__(183);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction VoteButton(props) {\n\t  var selectedAnswer = props.selectedAnswer;\n\t\n\t\n\t  function handleClick() {\n\t    if (selectedAnswer) {\n\t      props.makeVoteRequest(selectedAnswer);\n\t    }\n\t  }\n\t\n\t  var classes = (0, _classnames2.default)('bulbs-poll-vote', {\n\t    'bulbs-poll-footer': true\n\t  });\n\t\n\t  return _react2.default.createElement(\n\t    'button',\n\t    {\n\t      className: classes,\n\t      onClick: handleClick,\n\t      disabled: !selectedAnswer.id\n\t    },\n\t    'Vote'\n\t  );\n\t}\n\t\n\tVoteButton.propTypes = {\n\t  makeVoteRequest: _react.PropTypes.func,\n\t  selectedAnswer: _react.PropTypes.object\n\t};\n\n/***/ },\n\n/***/ 186:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = RequestError;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction RequestError(_ref) {\n\t  var error = _ref.error;\n\t  var children = _ref.children;\n\t  var reset = _ref.reset;\n\t\n\t  if (error) {\n\t    return _react2.default.createElement(\n\t      \"div\",\n\t      { className: \"bulbs-poll-network-error\" },\n\t      _react2.default.createElement(\n\t        \"p\",\n\t        null,\n\t        children\n\t      ),\n\t      _react2.default.createElement(\n\t        \"button\",\n\t        { onClick: reset },\n\t        \"OK\"\n\t      )\n\t    );\n\t  } else {\n\t    return _react2.default.createElement(\"div\", null);\n\t  }\n\t}\n\n/***/ },\n\n/***/ 187:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Results;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _classnames = __webpack_require__(183);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tvar _cover = __webpack_require__(179);\n\t\n\tvar _cover2 = _interopRequireDefault(_cover);\n\t\n\tvar _result = __webpack_require__(188);\n\t\n\tvar _result2 = _interopRequireDefault(_result);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Results(props) {\n\t  var className = (0, _classnames2.default)('bulbs-poll-results', {});\n\t  var _props$data = props.data;\n\t  var poll = _props$data.poll;\n\t  var winningAnswers = _props$data.winningAnswers;\n\t  var vote = _props$data.vote;\n\t\n\t\n\t  return _react2.default.createElement(\n\t    'div',\n\t    { className: className },\n\t    _react2.default.createElement(_cover2.default, { poll: poll }),\n\t    _react2.default.createElement(\n\t      'ul',\n\t      { className: 'bulbs-poll-results-list' },\n\t      poll.data.answers.map(function (answer, index) {\n\t        return _react2.default.createElement(_result2.default, {\n\t          key: index,\n\t          answer: answer,\n\t          poll: poll,\n\t          vote: vote,\n\t          winningAnswers: winningAnswers\n\t        });\n\t      })\n\t    ),\n\t    _react2.default.createElement(\n\t      'div',\n\t      { className: 'bulbs-poll-thank-you bulbs-poll-footer' },\n\t      'Thanks for voting!'\n\t    )\n\t  );\n\t}\n\t\n\tResults.propTypes = {\n\t  data: _react.PropTypes.object.isRequired\n\t};\n\n/***/ },\n\n/***/ 188:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Result;\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _classnames = __webpack_require__(183);\n\t\n\tvar _classnames2 = _interopRequireDefault(_classnames);\n\t\n\tvar _selectionMarker = __webpack_require__(184);\n\t\n\tvar _selectionMarker2 = _interopRequireDefault(_selectionMarker);\n\t\n\tvar _arrayFind = __webpack_require__(173);\n\t\n\tvar _arrayFind2 = _interopRequireDefault(_arrayFind);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Result(props) {\n\t  var answer = props.answer;\n\t  var poll = props.poll;\n\t  var vote = props.vote;\n\t  var winningAnswers = props.winningAnswers;\n\t\n\t  var isWinningAnswer = (0, _arrayFind2.default)(winningAnswers, function (winningAnswer) {\n\t    return winningAnswer.sodahead_id === answer.sodahead_id;\n\t  });\n\t\n\t  var isVoteAnswer = !!(vote.data && vote.data.answer.id === answer.sodahead_id);\n\t\n\t  var className = (0, _classnames2.default)('bulbs-poll-result', {\n\t    'bulbs-poll-result-winning': isWinningAnswer,\n\t    'bulbs-poll-result-selected': isVoteAnswer\n\t  });\n\t  var total_votes = answer.total_votes;\n\t\n\t  var percent = total_votes / poll.data.total_votes * 100;\n\t  var percentResult = percent.toFixed(0) + '%';\n\t\n\t  return _react2.default.createElement(\n\t    'li',\n\t    { className: className },\n\t    _react2.default.createElement('div', {\n\t      className: 'bulbs-poll-answer-bar',\n\t      style: { width: percentResult }\n\t    }),\n\t    _react2.default.createElement(\n\t      'div',\n\t      { className: 'bulbs-poll-answer-title' },\n\t      _react2.default.createElement(_selectionMarker2.default, { isSelected: isVoteAnswer }),\n\t      _react2.default.createElement(\n\t        'span',\n\t        { className: 'bulbs-poll-answer-text' },\n\t        answer.answer_text\n\t      ),\n\t      _react2.default.createElement(\n\t        'span',\n\t        { className: 'bulbs-poll-answer-result' },\n\t        percentResult\n\t      )\n\t    )\n\t  );\n\t}\n\t\n\tResult.propTypes = {\n\t  answer: _react.PropTypes.object.isRequired,\n\t  poll: _react.PropTypes.object.isRequired,\n\t  vote: _react.PropTypes.object.isRequired,\n\t  winningAnswers: _react.PropTypes.array.isRequired\n\t};\n\n/***/ },\n\n/***/ 189:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** dist/bulbs-poll.js\n **/","import React, { PropTypes } from 'react';\nimport register from 'bulbs-elements/register';\nimport BulbsElement from 'bulbs-elements/bulbs-element';\n\nimport PollStore from './bulbs-poll-store';\n\nimport PollQuestion from './components/question';\nimport PollResults from './components/results';\n\nimport './bulbs-poll.scss';\n\nclass BulbsPoll extends BulbsElement {\n  initialDispatch () {\n    this.store.actions.setSrc(this.props.src);\n    this.store.actions.fetchPollData(this.props.src);\n    this.store.actions.getCachedVoteData(this.props.src);\n  }\n\n  render () {\n    if (this.state.vote.voted) {\n      return <PollResults\n        data={this.state}\n      />;\n    }\n    else {\n      return <PollQuestion\n        actions={this.store.actions}\n        data={this.state}\n      />;\n    }\n  }\n}\n\nBulbsPoll.displayName = 'BulbsPoll';\n\nBulbsPoll.store = PollStore;\n\nBulbsPoll.propTypes = {\n  src: PropTypes.string.isRequired,\n};\n\nregister('bulbs-poll', BulbsPoll);\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/bulbs-poll.js\n **/","import { Store } from 'bulbs-elements/store';\n\nimport PollField from './fields/poll';\nimport SelectedAnswerField from './fields/selected-answer';\nimport WinningAnswersField from './fields/winning-answers';\nimport VoteField from './fields/vote';\nimport SrcField from './fields/src';\n\nexport default class PollStore extends Store { }\n\nStore.defineFields(PollStore, {\n  poll: PollField,\n  selectedAnswer: SelectedAnswerField,\n  winningAnswers: WinningAnswersField,\n  vote: VoteField,\n  src: SrcField,\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/bulbs-poll-store.js\n **/","import { Field, Action } from 'bulbs-elements/store';\nimport find from 'array-find';\n\nconst PollField = new Field({\n  initialState: {\n    data: {\n      answers: [],\n    },\n    requestInFlight: false,\n  },\n  setPollTotalVotes: new Action(function (state, count) {\n    state.data.total_votes = count;\n    return state;\n  }),\n  updateAnswerVoteCount: new Action(function (state, vote) {\n    state.data = Object.assign({}, state.data);\n    let answer = find(state.data.answers, (eachAnswer) => {\n      return eachAnswer.sodahead_id === vote.answer.id;\n    });\n\n    let nextAnswer = Object.assign({}, answer);\n    let answerIndex = state.data.answers.indexOf(answer);\n    nextAnswer.total_votes = vote.answer.totalVotes;\n    state.data.answers = [\n      ...state.data.answers.slice(0, answerIndex),\n      nextAnswer,\n      ...state.data.answers.slice(answerIndex + 1),\n    ];\n\n    return state;\n  }),\n  fetchPollData: new Action(function (state, src, store) {\n    src || (src = store.src);\n    store.src = src;\n    this.request(src, {\n      credentials: 'include',\n      success: store.actions.fetchPollDataSuccess,\n      failure: store.actions.fetchPollDataFailure,\n      error: store.actions.fetchPollDataError,\n    });\n    state.requestInFlight = true;\n    return state;\n  }),\n  fetchPollDataSuccess: new Action(function (state, data, store) {\n    state.data = data;\n    state.requestInFlight = false;\n\n    setImmediate(() => {\n      store.actions.collectWinningAnswers(store.state.poll.data.answers);\n    });\n\n    return state;\n  }),\n  fetchPollDataFailure: new Action(function (state, failure) {\n    state.requestFailure = failure;\n    state.requestInFlight = false;\n    return state;\n  }),\n  fetchPollDataError: new Action(function (state, error) {\n    state.requestError = error;\n    state.requestInFlight = false;\n    return state;\n  }),\n  resetFetchPollData: new Action(function (state, _null, store) {\n    state.requestInFlight = false;\n    delete state.requestFailure;\n    delete state.requestError;\n    setImmediate(store.actions.fetchPollData);\n    return state;\n  }),\n});\n\nexport default PollField;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/fields/poll.js\n **/","import { Field, Action } from 'bulbs-elements/store';\n\nconst SelectedAnswerField = new Field({\n  initialState: {},\n  selectAnswer: new Action(function (state, answer) {\n    return (state && state.id === answer.id) ? {} : answer;\n  }),\n});\n\nexport default SelectedAnswerField;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/fields/selected-answer.js\n **/","import { Field, Action } from 'bulbs-elements/store';\n\nconst WinningAnswersField = new Field({\n  initialState: [],\n  collectWinningAnswers: new Action(function (state, answers = []) {\n    let highScore = 0;\n    let winningAnswers = [];\n\n    answers.forEach((eachAnswer) => {\n      if (eachAnswer.total_votes === highScore) {\n        winningAnswers.push(eachAnswer);\n      }\n      else if (eachAnswer.total_votes > highScore) {\n        highScore = eachAnswer.total_votes;\n        winningAnswers = [eachAnswer];\n      }\n    });\n\n    return winningAnswers;\n  }),\n});\n\nexport default WinningAnswersField;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/fields/winning-answers.js\n **/","import { Field, Action } from 'bulbs-elements/store';\n\nfunction cacheKey (pollId) {\n  return `bulbs-poll:${pollId}:vote`;\n}\n\nconst VoteField = new Field({\n  initialState: {\n    voted: false,\n  },\n  getCachedVoteData: new Action(function (state, pollKey) {\n    let value = localStorage.getItem(cacheKey(pollKey));\n    if (value) {\n      state.voted = true;\n      state.data = JSON.parse(value);\n    }\n    return state;\n  }),\n  makeVoteRequest: new Action(function (state, answer, store) {\n    let { poll } = store.state;\n    this.request(`https://onion.sodahead.com/api/polls/${poll.data.sodahead_id}/vote/`, {\n      method: 'post',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n      },\n      body: `answer=${answer.sodahead_id}`,\n      success: store.actions.voteRequestSuccess,\n      failure: store.actions.voteRequestFailure,\n      error: store.actions.voteRequestError,\n    });\n\n    state.requestInFlight = true;\n    return state;\n  }),\n  voteRequestSuccess: new Action(function (state, data, store) {\n    localStorage.setItem(cacheKey(store.state.src), JSON.stringify(data.vote));\n    setImmediate(() => {\n      store.actions.setPollTotalVotes(data.poll.totalVotes);\n      store.actions.updateAnswerVoteCount(data.vote);\n      store.actions.collectWinningAnswers(store.state.poll.data.answers);\n    });\n    state.voted = true;\n    state.data = data.vote;\n    state.requestInFlight = false;\n    return state;\n  }),\n  voteRequestFailure: new Action(function (state, failure) {\n    state.requestFailure = failure;\n    state.requestInFlight = false;\n    return state;\n  }),\n  voteRequestError: new Action(function (state, error) {\n    state.requestInFlight = false;\n    state.requestError = error;\n    return state;\n  }),\n  resetVoteRequest: new Action(function (state) {\n    state.requestInFlight = false;\n    delete state.requestFailure;\n    delete state.requestError;\n    return state;\n  }),\n});\n\nexport default VoteField;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/fields/vote.js\n **/","import { Field, Action } from 'bulbs-elements/store';\n\nconst SrcField = new Field({\n  initialState: '',\n  setSrc: new Action(function (state, src) {\n    return src;\n  }),\n});\n\nexport default SrcField;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/fields/src.js\n **/","import React, { PropTypes } from 'react';\n\nimport Cover from './cover';\nimport Answers from './answers';\nimport VoteButton from './vote-button';\nimport RequestError from './request-error';\n\nexport default function Question (props) {\n  let {\n    selectAnswer,\n    makeVoteRequest,\n    resetFetchPollData,\n    resetVoteRequest,\n  } = props.actions;\n\n  let {\n    poll,\n    selectedAnswer,\n    vote,\n  } = props.data;\n\n  return (\n    <div>\n      <Cover poll={poll} />\n\n      <RequestError\n        error={poll.requestError}\n        reset={resetFetchPollData}\n      >\n        Could not connect to network when fetching poll data.\n      </RequestError>\n\n      <RequestError\n        error={vote.requestError}\n        reset={resetVoteRequest}\n      >\n        Could not connect to network when placing your vote.\n      </RequestError>\n\n      <Answers\n        answers={poll.data.answers}\n        selectAnswer={selectAnswer}\n        selectedAnswer={selectedAnswer}\n      />\n\n      <VoteButton\n        selectedAnswer={selectedAnswer}\n        makeVoteRequest={makeVoteRequest}\n      />\n    </div>\n  );\n}\n\nQuestion.propTypes = {\n  actions: PropTypes.object.isRequired,\n  data: PropTypes.object.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/question.js\n **/","import React, { PropTypes } from 'react';\nimport CroppedImage from 'bulbs-elements/components/cropped-image';\n\nexport default function Cover (props) {\n  let { poll } = props;\n  return (\n    <header className=\"bulbs-poll-cover\">\n      {\n        poll.data.thumbnail ? <CroppedImage image={poll.data.thumbnail} /> : null\n      }\n      <h1 className=\"bulbs-poll-cover-title\">\n        { poll.data.question_text }\n      </h1>\n    </header>\n  );\n}\n\nCover.propTypes = {\n  poll: PropTypes.object.isRequired,\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/cover.js\n **/","import React, { PropTypes } from 'react';\nimport Answer from './answer';\nimport classnames from 'classnames';\n\nexport default function Answers (props) {\n  let classNames = classnames('bulbs-poll-answers', {\n    'bulbs-poll-answers-selected': props.selectedAnswer.id,\n  });\n  return (\n    <ul className={classNames}>\n      {\n        props.answers.map((answer, index) => {\n          return <Answer\n            key={index}\n            answer={answer}\n            {...props}\n          />;\n        })\n      }\n    </ul>\n  );\n}\n\nAnswers.propTypes = {\n  answers: PropTypes.array.isRequired,\n  selectAnswer: PropTypes.func.isRequired,\n  selectedAnswer: PropTypes.object.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/answers.js\n **/","import React, { PropTypes } from 'react';\nimport classnames from 'classnames';\nimport SelectionMarker from './selection-marker';\n\nexport default function Answer (props) {\n  let {\n    answer,\n    selectAnswer,\n    selectedAnswer,\n  } = props;\n\n  let isSelected = answer.id === selectedAnswer.id;\n  let className = classnames('bulbs-poll-answer', {\n    'bulbs-poll-answer-selected': isSelected,\n  });\n\n  return (\n    <li\n      className={className}\n      onClick={selectAnswer.bind(null, answer)}\n    >\n      <SelectionMarker isSelected={isSelected} />\n      { answer.answer_text }\n    </li>\n  );\n}\n\nAnswer.propTypes = {\n  answer: PropTypes.object.isRequired,\n  selectAnswer: PropTypes.func.isRequired,\n  selectedAnswer: PropTypes.object,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/answer.js\n **/","import React, { PropTypes } from 'react';\n\nexport default function SelectionMarker (props) {\n  let {\n    isSelected,\n  } = props;\n\n  return (\n    <svg width=\"20px\" height=\"20px\">\n      <circle cx=\"10\" cy=\"10\" r=\"8\" fill=\"none\" stroke=\"black\" strokeWidth=\"2px\" />\n      <circle cx=\"10\" cy=\"10\" r=\"5\" fill={isSelected ? 'black' : 'none' } />\n    </svg>\n  );\n}\n\nSelectionMarker.propTypes = {\n  isSelected: PropTypes.bool,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/selection-marker.js\n **/","import React, { PropTypes } from 'react';\nimport classnames from 'classnames';\n\nexport default function VoteButton (props) {\n  let { selectedAnswer } = props;\n\n  function handleClick () {\n    if (selectedAnswer) {\n      props.makeVoteRequest(selectedAnswer);\n    }\n  }\n\n  let classes = classnames('bulbs-poll-vote', {\n    'bulbs-poll-footer': true,\n  });\n\n  return (\n    <button\n      className={classes}\n      onClick={handleClick}\n      disabled={!selectedAnswer.id}\n    >\n      Vote\n    </button>\n  );\n}\n\nVoteButton.propTypes = {\n  makeVoteRequest: PropTypes.func,\n  selectedAnswer: PropTypes.object,\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/vote-button.js\n **/","import React from 'react';\n\nexport default function RequestError ({ error, children, reset }) {\n  if (error) {\n    return (\n      <div className=\"bulbs-poll-network-error\">\n        <p>\n          { children }\n        </p>\n        <button onClick={reset}>OK</button>\n      </div>\n    );\n  }\n  else {\n    return <div />;\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/request-error.js\n **/","import React, { PropTypes } from 'react';\nimport classnames from 'classnames';\n\nimport Cover from './cover';\nimport Result from './result';\n\nexport default function Results (props) {\n  let className = classnames('bulbs-poll-results', {});\n  let {\n    poll,\n    winningAnswers,\n    vote,\n  } = props.data;\n\n  return (\n    <div className={className}>\n      <Cover poll={poll} />\n      <ul className='bulbs-poll-results-list'>\n        {\n          poll.data.answers.map((answer, index) => {\n            return <Result\n              key={index}\n              answer={answer}\n              poll={poll}\n              vote={vote}\n              winningAnswers={winningAnswers}\n            />;\n          })\n        }\n      </ul>\n      <div className='bulbs-poll-thank-you bulbs-poll-footer'>\n        Thanks for voting!\n      </div>\n    </div>\n  );\n}\n\nResults.propTypes = {\n  data: PropTypes.object.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/results.js\n **/","import React, { PropTypes } from 'react';\nimport classnames from 'classnames';\nimport SelectionMarker from './selection-marker';\nimport find from 'array-find';\n\nexport default function Result (props) {\n  let {\n    answer,\n    poll,\n    vote,\n    winningAnswers,\n  } = props;\n  let isWinningAnswer = find(winningAnswers, (winningAnswer) => {\n    return winningAnswer.sodahead_id === answer.sodahead_id;\n  });\n\n  let isVoteAnswer = !!(vote.data && vote.data.answer.id === answer.sodahead_id);\n\n  let className = classnames('bulbs-poll-result', {\n    'bulbs-poll-result-winning': isWinningAnswer,\n    'bulbs-poll-result-selected': isVoteAnswer,\n  });\n  let { total_votes } = answer;\n  let percent = (total_votes / poll.data.total_votes) * 100;\n  let percentResult = `${percent.toFixed(0)}%`;\n\n  return (\n    <li className={className}>\n      <div\n        className='bulbs-poll-answer-bar'\n        style={{ width: percentResult }}\n      />\n      <div className='bulbs-poll-answer-title'>\n        <SelectionMarker isSelected={isVoteAnswer}/>\n        <span className='bulbs-poll-answer-text'>\n          { answer.answer_text }\n        </span>\n        <span className='bulbs-poll-answer-result'>\n          { percentResult }\n        </span>\n      </div>\n    </li>\n  );\n}\n\nResult.propTypes = {\n  answer: PropTypes.object.isRequired,\n  poll: PropTypes.object.isRequired,\n  vote: PropTypes.object.isRequired,\n  winningAnswers: PropTypes.array.isRequired,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-poll/components/result.js\n **/"],"sourceRoot":""}