{"version":3,"sources":["webpack:///bulbs-splitpic.js","webpack:///./elements/bulbs-splitpic/bulbs-splitpic.js","webpack:///./~/invariant/browser.js?9520**","webpack:///./elements/bulbs-splitpic/splitpic.js"],"names":["webpackJsonp","0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_defaults","defaults","keys","Object","getOwnPropertyNames","i","length","key","value","getOwnPropertyDescriptor","configurable","undefined","defineProperty","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","create","constructor","enumerable","writable","setPrototypeOf","_register","_splitpic","_invariant","_invariant2","BulbsSplitpic","_BulbsHTMLElement","this","apply","arguments","attachedCallback","attributes","orientation","splitPic","SplitPic","SplitPicVertical","BulbsHTMLElement","registerElement","1","invariant","condition","format","a","b","c","d","e","f","error","Error","args","argIndex","replace","name","framesToPop","235","element","updateSplit","x","isRelative","relativeX","elOffset","el","offset","left","leftPane","css","bar","width","$","infoHidden","isMoving","lastX","lastY","startPercentage","find","eq","data","isNaN","on","event","touches","fadeOut","originalEvent","touch","dx","dy","pageX","pageY","Math","abs","preventDefault","y","relativeY","top","overPane","height","setInitialPosition","parseInt","attr","img","complete","load","bind","236"],"mappings":"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","file":"bulbs-splitpic.js","sourcesContent":["webpackJsonp([9],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _register = __webpack_require__(2);\n\t\n\tvar _splitpic = __webpack_require__(235);\n\t\n\tvar _invariant = __webpack_require__(1);\n\t\n\tvar _invariant2 = _interopRequireDefault(_invariant);\n\t\n\t__webpack_require__(236);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\t\n\tvar BulbsSplitpic = function (_BulbsHTMLElement) {\n\t  _inherits(BulbsSplitpic, _BulbsHTMLElement);\n\t\n\t  function BulbsSplitpic() {\n\t    _classCallCheck(this, BulbsSplitpic);\n\t\n\t    return _possibleConstructorReturn(this, _BulbsHTMLElement.apply(this, arguments));\n\t  }\n\t\n\t  BulbsSplitpic.prototype.attachedCallback = function attachedCallback() {\n\t    (0, _invariant2.default)(this.attributes.orientation.value, 'BulbsSplitpic: orientation attribute is required');\n\t    this.orientation = this.attributes.orientation.value;\n\t\n\t    if (this.orientation === 'horizontal') {\n\t      this.splitPic = new _splitpic.SplitPic(this);\n\t    }\n\t\n\t    if (this.orientation === 'vertical') {\n\t      this.splitPic = new _splitpic.SplitPicVertical(this);\n\t    }\n\t  };\n\t\n\t  return BulbsSplitpic;\n\t}(_register.BulbsHTMLElement);\n\t\n\t(0, _register.registerElement)('bulbs-splitpic', BulbsSplitpic);\n\t\n\texports.default = BulbsSplitpic;\n\n/***/ },\n\n/***/ 1:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright 2013-2015, Facebook, Inc.\n\t * All rights reserved.\n\t *\n\t * This source code is licensed under the BSD-style license found in the\n\t * LICENSE file in the root directory of this source tree. An additional grant\n\t * of patent rights can be found in the PATENTS file in the same directory.\n\t */\n\t\n\t'use strict';\n\t\n\t/**\n\t * Use invariant() to assert state which your program assumes to be true.\n\t *\n\t * Provide sprintf-style format (only %s is supported) and arguments\n\t * to provide information about what broke and what you were\n\t * expecting.\n\t *\n\t * The invariant message will be stripped in production, but the invariant\n\t * will remain to ensure logic does not differ in production.\n\t */\n\t\n\tvar invariant = function(condition, format, a, b, c, d, e, f) {\n\t  if (false) {\n\t    if (format === undefined) {\n\t      throw new Error('invariant requires an error message argument');\n\t    }\n\t  }\n\t\n\t  if (!condition) {\n\t    var error;\n\t    if (format === undefined) {\n\t      error = new Error(\n\t        'Minified exception occurred; use the non-minified dev environment ' +\n\t        'for the full error message and additional helpful warnings.'\n\t      );\n\t    } else {\n\t      var args = [a, b, c, d, e, f];\n\t      var argIndex = 0;\n\t      error = new Error(\n\t        format.replace(/%s/g, function() { return args[argIndex++]; })\n\t      );\n\t      error.name = 'Invariant Violation';\n\t    }\n\t\n\t    error.framesToPop = 1; // we don't care about invariant's own frame\n\t    throw error;\n\t  }\n\t};\n\t\n\tmodule.exports = invariant;\n\n\n/***/ },\n\n/***/ 235:\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.SplitPic = SplitPic;\n\texports.SplitPicVertical = SplitPicVertical;\n\tfunction SplitPic(element) {\n\t  var el = $(element);\n\t  var leftPane = $('.splitpic-left-image', el);\n\t  var bar = $('.splitpic-bar', el);\n\t  var infoHidden = false;\n\t  var isMoving = false;\n\t  var lastX = 0;\n\t  var lastY = 0;\n\t  var startPercentage = el.find('.splitpic-images').eq(0).data('start-percent');\n\t\n\t  // split the image at the cursor\n\t  function updateSplit(x, isRelative) {\n\t    var relativeX = void 0;\n\t\n\t    if (!isRelative) {\n\t      var elOffset = el.offset();\n\t      relativeX = x - elOffset.left;\n\t    } else {\n\t      relativeX = x;\n\t    }\n\t\n\t    leftPane.css('clip', 'rect(0px, ' + relativeX + 'px, auto, 0px)');\n\t    bar.css('left', relativeX - bar.width() / 2 + 'px');\n\t  }\n\t\n\t  // how much of the left image should we show at start? 50% if not specified\n\t  if (isNaN(startPercentage)) {\n\t    startPercentage = 50;\n\t  }\n\t\n\t  startPercentage /= 100;\n\t  updateSplit(el.width() * startPercentage, true);\n\t\n\t  el.on('touchmove touchstart', function (event) {\n\t    var touches = void 0;\n\t\n\t    if (!infoHidden) {\n\t      $('.splitpic-info', el).fadeOut(200);\n\t      infoHidden = true;\n\t    }\n\t\n\t    if (event.touches) {\n\t      touches = event.touches;\n\t    } else if (event.originalEvent && event.originalEvent.touches) {\n\t      touches = event.originalEvent.touches;\n\t    }\n\t\n\t    if (touches) {\n\t      var touch = touches[0];\n\t      var dx = 0;\n\t      var dy = 0;\n\t\n\t      if (isMoving) {\n\t        dx = touch.pageX - lastX;\n\t        dy = touch.pageY - lastY;\n\t      } else {\n\t        isMoving = true;\n\t      }\n\t\n\t      // if we move a bit and it's laterally\n\t      if (Math.abs(dx) > Math.abs(dy)) {\n\t        event.preventDefault();\n\t        updateSplit(touches[0].pageX);\n\t      }\n\t\n\t      lastX = touch.pageX;\n\t      lastY = touch.pageY;\n\t    }\n\t  });\n\t\n\t  el.on('touchend', function () {\n\t    isMoving = false;\n\t  });\n\t\n\t  el.on('mouseenter mousemove mouseleave', function (event) {\n\t    if (!infoHidden) {\n\t      $('.splitpic-info', el).fadeOut(200);\n\t      infoHidden = true;\n\t    }\n\t    updateSplit(event.pageX);\n\t  });\n\t}\n\t\n\tfunction SplitPicVertical(element) {\n\t  var el = $(element);\n\t  var overPane = $('.splitpic-left-image', el);\n\t  var bar = $('.splitpic-bar', el);\n\t  var infoHidden = false;\n\t  var img = $('.splitpic-left-image img', element);\n\t  var isMoving = false;\n\t  var lastX = 0;\n\t  var lastY = 0;\n\t\n\t  // split the image at the cursor\n\t  function updateSplit(y, isRelative) {\n\t    var relativeY = void 0;\n\t    if (!isRelative) {\n\t      var elOffset = el.offset();\n\t      relativeY = y - elOffset.top;\n\t    } else {\n\t      relativeY = y;\n\t    }\n\t\n\t    overPane.css('clip', 'rect(' + relativeY + 'px, auto, auto, 0px)');\n\t    bar.css('top', relativeY - bar.height() / 2 + 'px');\n\t  }\n\t\n\t  // this is necessary since we're using original crops and therefore the\n\t  // image height won't be known until it's loaded.\n\t  function setInitialPosition() {\n\t    // how much of the left image should we show at start? 50% if not specified\n\t    var startPercentage = parseInt(el.attr('data-start-percent'), 10);\n\t\n\t    if (isNaN(startPercentage)) {\n\t      startPercentage = 50;\n\t    }\n\t\n\t    startPercentage /= 100;\n\t    updateSplit(el.height() * startPercentage, true);\n\t  }\n\t\n\t  if (img[0].complete) {\n\t    setInitialPosition();\n\t  } else {\n\t    img.load(setInitialPosition.bind(this));\n\t  }\n\t\n\t  el.on('touchmove touchstart', function (event) {\n\t    var touches = void 0;\n\t\n\t    if (!infoHidden) {\n\t      $('.splitpic-info', el).fadeOut(200);\n\t      infoHidden = true;\n\t    }\n\t\n\t    if (event.touches) {\n\t      touches = event.touches;\n\t    } else if (event.originalEvent && event.originalEvent.touches) {\n\t      touches = event.originalEvent.touches;\n\t    }\n\t\n\t    if (touches) {\n\t      var touch = touches[0];\n\t      var dx = 0;\n\t      var dy = 0;\n\t\n\t      if (isMoving) {\n\t        dx = touch.pageX - lastX;\n\t        dy = touch.pageY - lastY;\n\t      } else {\n\t        dy = 0.001; // HACK: so it's not equal to dx and immediately updates\n\t        isMoving = true;\n\t      }\n\t      // if we move a bit and it's vertically and not too fast\n\t      if (Math.abs(dy) > Math.abs(dx) && Math.abs(dy) < 10) {\n\t        event.preventDefault();\n\t        updateSplit(touch.pageY);\n\t      }\n\t\n\t      lastX = touch.pageX;\n\t      lastY = touch.pageY;\n\t    }\n\t  });\n\t\n\t  el.on('touchend', function () {\n\t    isMoving = false;\n\t  });\n\t\n\t  el.on('mouseenter mousemove mouseleave', function (event) {\n\t    if (!infoHidden) {\n\t      $('.splitpic-info', el).fadeOut(200);\n\t      infoHidden = true;\n\t    }\n\t\n\t    updateSplit(event.pageY);\n\t  });\n\t}\n\n/***/ },\n\n/***/ 236:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** bulbs-splitpic.js\n **/","import { registerElement, BulbsHTMLElement } from 'bulbs-elements/register';\nimport { SplitPic, SplitPicVertical } from './splitpic';\nimport invariant from 'invariant';\nimport './bulbs-splitpic.scss';\n\nclass BulbsSplitpic extends BulbsHTMLElement {\n  attachedCallback () {\n    invariant(this.attributes.orientation.value, 'BulbsSplitpic: orientation attribute is required');\n    this.orientation = this.attributes.orientation.value;\n\n    if (this.orientation === 'horizontal') {\n      this.splitPic = new SplitPic(this);\n    }\n\n    if (this.orientation === 'vertical') {\n      this.splitPic = new SplitPicVertical(this);\n    }\n  }\n}\n\nregisterElement('bulbs-splitpic', BulbsSplitpic);\n\nexport default BulbsSplitpic;\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-splitpic/bulbs-splitpic.js\n **/","/**\n * Copyright 2013-2015, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar invariant = function(condition, format, a, b, c, d, e, f) {\n  if (process.env.NODE_ENV !== 'production') {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  }\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error(\n        'Minified exception occurred; use the non-minified dev environment ' +\n        'for the full error message and additional helpful warnings.'\n      );\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(\n        format.replace(/%s/g, function() { return args[argIndex++]; })\n      );\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n};\n\nmodule.exports = invariant;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/invariant/browser.js\n ** module id = 1\n ** module chunks = 0 3 5 9 11 14\n **/","export function SplitPic (element) {\n  let el = $(element);\n  let leftPane = $('.splitpic-left-image', el);\n  let bar = $('.splitpic-bar', el);\n  let infoHidden = false;\n  let isMoving = false;\n  let lastX = 0;\n  let lastY = 0;\n  let startPercentage = el.find('.splitpic-images').eq(0).data('start-percent');\n\n  // split the image at the cursor\n  function updateSplit (x, isRelative) {\n    let relativeX;\n\n    if (!isRelative) {\n      let elOffset = el.offset();\n      relativeX = x - elOffset.left;\n    }\n    else {\n      relativeX = x;\n    }\n\n    leftPane.css('clip', 'rect(0px, ' + relativeX + 'px, auto, 0px)');\n    bar.css('left', relativeX - bar.width() / 2 + 'px');\n  }\n\n  // how much of the left image should we show at start? 50% if not specified\n  if (isNaN(startPercentage)) {\n    startPercentage = 50;\n  }\n\n  startPercentage /= 100;\n  updateSplit(el.width() * startPercentage, true);\n\n  el.on('touchmove touchstart', function (event) {\n    let touches;\n\n    if (!infoHidden) {\n      $('.splitpic-info', el).fadeOut(200);\n      infoHidden = true;\n    }\n\n    if (event.touches) {\n      touches = event.touches;\n    }\n    else if (event.originalEvent && event.originalEvent.touches) {\n      touches = event.originalEvent.touches;\n    }\n\n    if (touches) {\n      let touch = touches[0];\n      let dx = 0;\n      let dy = 0;\n\n      if (isMoving) {\n        dx = touch.pageX - lastX;\n        dy = touch.pageY - lastY;\n      }\n      else {\n        isMoving = true;\n      }\n\n      // if we move a bit and it's laterally\n      if (Math.abs(dx) > Math.abs(dy)) {\n        event.preventDefault();\n        updateSplit(touches[0].pageX);\n      }\n\n      lastX = touch.pageX;\n      lastY = touch.pageY;\n    }\n  });\n\n  el.on('touchend', function () {\n    isMoving = false;\n  });\n\n  el.on('mouseenter mousemove mouseleave', function (event) {\n    if (!infoHidden) {\n      $('.splitpic-info', el).fadeOut(200);\n      infoHidden = true;\n    }\n    updateSplit(event.pageX);\n  });\n}\n\nexport function SplitPicVertical (element) {\n  let el = $(element);\n  let overPane = $('.splitpic-left-image', el);\n  let bar = $('.splitpic-bar', el);\n  let infoHidden = false;\n  let img = $('.splitpic-left-image img', element);\n  let isMoving = false;\n  let lastX = 0;\n  let lastY = 0;\n\n  // split the image at the cursor\n  function updateSplit (y, isRelative) {\n    let relativeY;\n    if (!isRelative) {\n      let elOffset = el.offset();\n      relativeY = y - elOffset.top;\n    }\n    else {\n      relativeY = y;\n    }\n\n    overPane.css('clip', 'rect(' + relativeY + 'px, auto, auto, 0px)');\n    bar.css('top', relativeY - bar.height() / 2 + 'px');\n  }\n\n  // this is necessary since we're using original crops and therefore the\n  // image height won't be known until it's loaded.\n  function setInitialPosition () {\n    // how much of the left image should we show at start? 50% if not specified\n    let startPercentage = parseInt(el.attr('data-start-percent'), 10);\n\n    if (isNaN(startPercentage)) {\n      startPercentage = 50;\n    }\n\n    startPercentage /= 100;\n    updateSplit(el.height() * startPercentage, true);\n  }\n\n  if (img[0].complete) {\n    setInitialPosition();\n  }\n  else {\n    img.load(setInitialPosition.bind(this));\n  }\n\n  el.on('touchmove touchstart', function (event) {\n    let touches;\n\n    if (!infoHidden) {\n      $('.splitpic-info', el).fadeOut(200);\n      infoHidden = true;\n    }\n\n    if (event.touches) {\n      touches = event.touches;\n    }\n    else if (event.originalEvent && event.originalEvent.touches) {\n      touches = event.originalEvent.touches;\n    }\n\n    if (touches) {\n      let touch = touches[0];\n      let dx = 0;\n      let dy = 0;\n\n      if (isMoving) {\n        dx = touch.pageX - lastX;\n        dy = touch.pageY - lastY;\n      }\n      else {\n        dy = 0.001; // HACK: so it's not equal to dx and immediately updates\n        isMoving = true;\n      }\n      // if we move a bit and it's vertically and not too fast\n      if (Math.abs(dy) > Math.abs(dx) && Math.abs(dy) < 10) {\n        event.preventDefault();\n        updateSplit(touch.pageY);\n      }\n\n      lastX = touch.pageX;\n      lastY = touch.pageY;\n    }\n  });\n\n  el.on('touchend', function () {\n    isMoving = false;\n  });\n\n  el.on('mouseenter mousemove mouseleave', function (event) {\n    if (!infoHidden) {\n      $('.splitpic-info', el).fadeOut(200);\n      infoHidden = true;\n    }\n\n    updateSplit(event.pageY);\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./elements/bulbs-splitpic/splitpic.js\n **/"],"sourceRoot":""}