webpackJsonp([17],{0:function(t,e,n){(function(t){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var i=n[o],r=Object.getOwnPropertyDescriptor(e,i);r&&r.configurable&&void 0===t[i]&&Object.defineProperty(t,i,r)}return t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):i(t,e))}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},f=n(202),u=o(f),l=n(306),p=o(l),d=n(1),h=o(d),y=n(172),b=o(y),v=n(2);n(307);var m=function(e){function n(o){r(this,n),(0,h["default"])(!!o.src,"notification-container component requires a src");var i=c(this,e.call(this,o)),a=JSON.parse(t.localStorage.getItem("onion-local-notification-ids")||"[]");return i.state={localNotificationIds:a,notification:{}},i}return a(n,e),n.prototype.requestNotifications=function(t){fetch(t).then(function(t){return t.json()}).then(this.handleRequestSuccess.bind(this))},n.prototype.componentDidMount=function(){this.requestNotifications(this.props.src)},n.prototype.handleRequestSuccess=function(e){var n=e.results,o=e.next||null;this.state.localNotificationIds.length>0&&(n=this.removeLocalNotifications(n)),n.length>0?(this.setState({notification:n[0],localNotificationIds:this.state.localNotificationIds.concat([n[0].id])}),t.localStorage.setItem("onion-local-notification-ids",JSON.stringify(this.state.localNotificationIds))):o&&this.requestNotifications(o)},n.prototype.removeLocalNotifications=function(t){var e=this,n=[];return t.forEach(function(t){e.state.localNotificationIds.indexOf(t.id)===-1&&n.push(t)}),n},n.prototype.notificationsAreActive=function(){var e=JSON.parse(t.sessionStorage.getItem("onion-notifications-off")||"false");return!e},n.prototype.render=function(){return this.state.notification&&this.notificationsAreActive()?b["default"].createElement(p["default"],{notification:this.state.notification}):null},n}(u["default"]);s(m,{displayName:"NotificationContainer",propTypes:{src:y.PropTypes.string.isRequired}}),(0,v.registerReactElement)("notification-container",m),e["default"]=m}).call(e,function(){return this}())},1:function(t,e,n){"use strict";var o=function(t,e,n,o,i,r,c,a){if(!t){var s;if(void 0===e)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var f=[n,o,i,r,c,a],u=0;s=new Error(e.replace(/%s/g,function(){return f[u++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}};t.exports=o},183:function(t,e){"use strict";t.exports=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments[1];Object.keys(t).forEach(function(n){e(t[n],n)})}},186:function(t,e){var n=function(){"use strict";function t(e,n,o,i){function c(e,o){if(null===e)return null;if(0==o)return e;var a,l;if("object"!=typeof e)return e;if(t.__isArray(e))a=[];else if(t.__isRegExp(e))a=new RegExp(e.source,r(e)),e.lastIndex&&(a.lastIndex=e.lastIndex);else if(t.__isDate(e))a=new Date(e.getTime());else{if(u&&Buffer.isBuffer(e))return a=new Buffer(e.length),e.copy(a),a;"undefined"==typeof i?(l=Object.getPrototypeOf(e),a=Object.create(l)):(a=Object.create(i),l=i)}if(n){var p=s.indexOf(e);if(p!=-1)return f[p];s.push(e),f.push(a)}for(var d in e){var h;l&&(h=Object.getOwnPropertyDescriptor(l,d)),h&&null==h.set||(a[d]=c(e[d],o-1))}return a}var a;"object"==typeof n&&(o=n.depth,i=n.prototype,a=n.filter,n=n.circular);var s=[],f=[],u="undefined"!=typeof Buffer;return"undefined"==typeof n&&(n=!0),"undefined"==typeof o&&(o=1/0),c(e,o)}function e(t){return Object.prototype.toString.call(t)}function n(t){return"object"==typeof t&&"[object Date]"===e(t)}function o(t){return"object"==typeof t&&"[object Array]"===e(t)}function i(t){return"object"==typeof t&&"[object RegExp]"===e(t)}function r(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return t.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},t.__objToStr=e,t.__isDate=n,t.__isArray=o,t.__isRegExp=i,t.__getRegExpFlags=r,t}();"object"==typeof t&&t.exports&&(t.exports=n)},202:function(t,e,n){(function(t){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var i=n[o],r=Object.getOwnPropertyDescriptor(e,i);r&&r.configurable&&void 0===t[i]&&Object.defineProperty(t,i,r)}return t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):i(t,e))}Object.defineProperty(e,"__esModule",{value:!0});var s=n(172),f=o(s),u=n(203),l=o(u),p=function(e){function n(o){r(this,n);var i=c(this,e.call(this,o));return i.store=i.createStore(),i.store&&(i.store.subscribeComponent(i),t(i.initialDispatch.bind(i))),i}return a(n,e),n.prototype.createStore=function(){var t=void 0;return this.constructor.schema&&(t=new l["default"]({schema:this.constructor.schema})),t},n.prototype.initialDispatch=function(){},n}(f["default"].Component);e["default"]=p}).call(e,n(3).setImmediate)},203:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(204),r=o(i);e["default"]=r["default"]},204:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){var e={};return(0,h["default"])(t,function(t,n){e[n]=(0,p["default"])(t.initialState)}),e}function c(t){var e={};return(0,h["default"])(t,function(t,n){(0,h["default"])(t.actions,function(t,o){t.fieldName=n,t.type=o,e[o]=t})}),e}function a(t,e){var n=c(t),o={};return(0,h["default"])(n,function(t,n){o[n]=f.bind(null,e,t)}),o}function s(t){t.components.forEach(function(e){e.setState(t.state)})}function f(t,e,n){y&&console.time("dispatch "+e.type);var o=t.state,i=u({},o),r=o[e.fieldName],c=(0,p["default"])(r);i[e.fieldName]=e(c,n,t),"undefined"!=typeof i[e.fieldName]&&(t.state=i),s(t),y&&(console.groupCollapsed("DISPATCH %c"+e.type+" %c=> %c"+e.fieldName,"color:green","color:auto","color:blue"),console.timeEnd("dispatch "+e.type),console.log("PAYLOAD: ",n),console.log("PREV VALUE: ",r),console.log("NEXT VALUE: ",c),console.log("PREV STORE: ",o),console.log("NEXT STORE: ",i),console.groupEnd())}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},l=n(186),p=o(l),d=n(183),h=o(d),y=!1,b=function(){function t(e){i(this,t),this.actions=a(e.schema,this),this.state=r(e.schema),this.components=[],y&&console.log("%cCREATED STORE","color:green")}return t.prototype.subscribeComponent=function(t){this.components.push(t),t.state=this.state},t.prototype.unsubscribeComponent=function(t){var e=this.components.indexOf(t);e>-1&&this.components.splice(e,1)},t}();e["default"]=b},306:function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){for(var n=Object.getOwnPropertyNames(e),o=0;o<n.length;o++){var i=n[o],r=Object.getOwnPropertyDescriptor(e,i);r&&r.configurable&&void 0===t[i]&&Object.defineProperty(t,i,r)}return t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):i(t,e))}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},f=n(202),u=o(f),l=n(1),p=o(l),d=n(172),h=o(d),y=n(15),b=o(y),v=function(t){function e(n){return r(this,e),(0,p["default"])(!!n.notification,"notification-display component requires notification"),c(this,t.call(this,n))}return a(e,t),e.prototype.deleteThis=function(){var t=b["default"].findDOMNode(this),e=t.closest("notification-container");e.remove(),window.sessionStorage.setItem("onion-notifications-off",JSON.stringify(!0))},e.prototype.render=function(){return this.props.notification?h["default"].createElement("div",{className:"notification-display"},h["default"].createElement("div",{className:"notification-logo"}),h["default"].createElement("div",{className:"notification-body"},h["default"].createElement("p",null,this.props.notification.body,h["default"].createElement("a",{href:this.props.notification.clickthrough_url},this.props.notification.clickthrough_cta))),h["default"].createElement("div",{className:"notification-close",onClick:this.deleteThis.bind(this)},"✖")):h["default"].createElement("div",{className:"inactive-notification-display"})},e}(u["default"]);s(v,{displayName:"NotificationDisplay",propTypes:{notification:d.PropTypes.object.isRequired}}),e["default"]=v},307:function(t,e){}});
//# sourceMappingURL=notification-container.js.map